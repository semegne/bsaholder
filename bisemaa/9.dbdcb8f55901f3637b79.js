(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Yj9t:function(e,t,o){"use strict";o.r(t),o.d(t,"AuthModule",(function(){return _}));var r=o("ofXK"),n=o("tyNb"),i=o("3Pt+"),c=o("fXoL"),s=o("AytR"),a=o("tk/3");let l=(()=>{class e{constructor(e){this.http=e,this.baseUrl=s.a.baseUrl}login(e){return this.http.get(`${this.baseUrl}api/login/${e.email}/${e.password}`)}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(a.a))},e.\u0275prov=c.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=o("c3AT"),d=o("Yvy/");function p(e,t){if(1&e){const e=c.Pb();c.Mb(0),c.Jb(1,"div",5),c.Ob(2,"div",6),c.Ob(3,"div",7),c.Ob(4,"div",8),c.Ob(5,"h1",9),c.zc(6,"BiSemA"),c.Nb(),c.Ob(7,"p",9),c.zc(8,"Please enter your account details to login"),c.Nb(),c.Ob(9,"form",10),c.Vb("submit",(function(){return c.uc(e),c.Xb().submit()})),c.Ob(10,"div",11),c.Jb(11,"input",12),c.Ob(12,"div",13),c.Jb(13,"span",14),c.Nb(),c.Nb(),c.Ob(14,"div",11),c.Jb(15,"input",15),c.Ob(16,"div",13),c.Jb(17,"span",16),c.Nb(),c.Nb(),c.Ob(18,"div",17),c.zc(19),c.Nb(),c.Ob(20,"div",18),c.Ob(21,"label",19),c.Jb(22,"input",20),c.Jb(23,"label",21),c.Nb(),c.Ob(24,"div",22),c.Ob(25,"div",23),c.Jb(26,"span",24),c.Nb(),c.Ob(27,"button",25),c.Jb(28,"i",26),c.zc(29," Login"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Jb(30,"div",5),c.Lb()}if(2&e){const e=c.Xb();c.xb(9),c.ec("formGroup",e.loginForm),c.xb(10),c.Ac(e.loginErrorMessage)}}const g=function(e){return{project_table_even_row:e}};function u(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",39),c.Ob(1,"div",40),c.zc(2),c.Nb(),c.Ob(3,"div",41),c.Ob(4,"a",42),c.Vb("click",(function(){c.uc(e);const o=t.$implicit;return c.Xb(2).selectProject(o.id)})),c.zc(5),c.Nb(),c.Nb(),c.Ob(6,"div",41),c.zc(7),c.Yb(8,"date"),c.Nb(),c.Ob(9,"div",40),c.zc(10),c.Nb(),c.Ob(11,"div",41),c.zc(12),c.Yb(13,"date"),c.Nb(),c.Ob(14,"div",43),c.zc(15),c.Yb(16,"slice"),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit,o=t.index,r=c.Xb(2);c.ec("ngClass",c.mc(17,g,o%2==0)),c.xb(2),c.Ac(r.projects.length-o),c.xb(3),c.Ac(e.projectName),c.xb(2),c.Ac(c.ac(8,7,e.createdAt,"MM/dd/yyyy")),c.xb(3),c.Ac(null==e.orderConfirmationDate?"No":"Yes"),c.xb(2),c.Ac(null==e.orderConfirmationDate?"Not exported":c.ac(13,10,e.orderConfirmationDate,"MM/dd/yyyy")),c.xb(3),c.Ac(""==e.remark?"No remarks":e.remark.length>47?c.bc(16,13,e.remark,0,47)+"...":e.remark)}}function m(e,t){if(1&e&&(c.Ob(0,"div",31),c.Ob(1,"span",44),c.zc(2),c.Nb(),c.Nb()),2&e){const e=c.Xb(2);c.xb(2),c.Ac(e.projectSelectionErrorMessage)}}function h(e,t){if(1&e){const e=c.Pb();c.Mb(0),c.Ob(1,"div",27),c.Ob(2,"div",7),c.Ob(3,"div",8),c.Ob(4,"h1",28),c.zc(5),c.Nb(),c.Ob(6,"button",29),c.Vb("click",(function(){return c.uc(e),c.Xb().showAddProjectDialog=!0})),c.zc(7,"New Project"),c.Nb(),c.Nb(),c.Ob(8,"div",30),c.Ob(9,"div",31),c.Jb(10,"div",32),c.Ob(11,"div",33),c.Ob(12,"span",34),c.zc(13,"Project Name"),c.Nb(),c.Nb(),c.Ob(14,"div",33),c.Ob(15,"span",34),c.zc(16,"Start Date"),c.Nb(),c.Nb(),c.Ob(17,"div",32),c.Ob(18,"span",34),c.zc(19,"Exported"),c.Nb(),c.Nb(),c.Ob(20,"div",33),c.Ob(21,"span",34),c.zc(22,"Exported Date"),c.Nb(),c.Nb(),c.Ob(23,"div",35),c.Ob(24,"span",34),c.zc(25,"Remark"),c.Nb(),c.Nb(),c.Nb(),c.Ob(26,"div",36),c.yc(27,u,17,19,"div",37),c.Nb(),c.yc(28,m,3,1,"div",38),c.Nb(),c.Nb(),c.Nb(),c.Lb()}if(2&e){const e=c.Xb();c.xb(5),c.Bc("",e.loggedInUser.DealerName," Projects"),c.xb(22),c.ec("ngForOf",e.projects),c.xb(1),c.ec("ngIf",""!=e.projectSelectionErrorMessage)}}function f(e,t){1&e&&c.Jb(0,"div",45)}function O(e,t){if(1&e&&(c.Ob(0,"div",54),c.zc(1),c.Nb()),2&e){const e=c.Xb(2);c.xb(1),c.Bc(" ",e.projectErrorMessage," ")}}function j(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",46),c.Ob(1,"div",8),c.Ob(2,"h1",17),c.zc(3,"Add new project"),c.Nb(),c.Ob(4,"form",10),c.Vb("submit",(function(){return c.uc(e),c.Xb().projectSelected()})),c.Ob(5,"div",11),c.Ob(6,"span",47),c.zc(7,"Project name:"),c.Nb(),c.Jb(8,"input",48),c.Nb(),c.Ob(9,"div",11),c.Ob(10,"span",47),c.zc(11,"Project remark:"),c.Nb(),c.Jb(12,"textarea",49),c.Nb(),c.yc(13,O,2,1,"div",50),c.Ob(14,"div",51),c.Ob(15,"button",52),c.zc(16,"Save"),c.Nb(),c.Ob(17,"button",53),c.Vb("click",(function(){return c.uc(e),c.Xb().cancelAddProject()})),c.zc(18,"Cancel"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=c.Xb();c.xb(4),c.ec("formGroup",e.projectForm),c.xb(9),c.ec("ngIf",""!=e.projectErrorMessage)}}const N=[{path:"",component:(()=>{class e{constructor(e,t,o,r,n){this.fb=e,this.authService=t,this.projectService=o,this.router=r,this.businessCentralService=n,this.loginErrorMessage="",this.loginForm=this.fb.group({email:["",[i.q.required]],password:["",[i.q.required]],dwg_2d:[""]}),this.projectForm=this.fb.group({projectRemark:["",[i.q.required]],projectName:["",[i.q.required]]}),this.projectErrorMessage="",this.projectSelectionErrorMessage="",this.showAddProjectDialog=!1,this.dealers_id=0}submit(){this.authService.login(this.loginForm.value).subscribe(e=>{e?e.data?this.loadAllProjects(e.data):e.message&&(this.loginErrorMessage=e.message):console.log("result not found !!")},e=>{console.log(e)})}loadAllProjects(e){this.loggedInUser=e,this.dealers_id=this.loggedInUser.dealers_id,this.dealers_id||(this.dealers_id=this.loggedInUser.id),this.projectService.getProjectsByDealerID(this.dealers_id).subscribe(e=>{this.projects=e.sort((e,t)=>t.id-e.id)},e=>{console.log("Failed to get projects by dealer id. Error details: "+JSON.stringify(e))})}projectSelected(){this.projectErrorMessage="",""===this.projectForm.value.projectName?this.projectErrorMessage="Please enter project name.":""===this.projectForm.value.projectRemark?this.projectErrorMessage="Please enter project remark.":this.dealers_id>0?this.projectService.checkIfExistsWithName(this.dealers_id,this.projectForm.value.projectName).subscribe(e=>{0==e.data?this.createBiSemASalesHeader():this.projectErrorMessage=e.message},e=>{console.log("Error occured while checking if project exists same name or not. Error details: "+JSON.stringify(e))}):this.projectErrorMessage="Something went wrong ! Dealer not found. Please try again and if issue persist contact administrator."}selectProject(e){const t=this.projects.filter(t=>t.id===e);t&&t.length>0?t[0].isClosed?this.projectSelectionErrorMessage="Please select project which is not exported. You cannot proceed with exported project.":this.updateUserDetailsAndLogin(t[0].id,t[0].projectName,t[0].BCProjectNumber):this.projectSelectionErrorMessage="Something went wrong ! Project not found. please try again and if issue persist contact administrator."}updateUserDetailsAndLogin(e,t,o,r=!1){this.loggedInUser.projectID=parseInt(e),this.loggedInUser.projectName=t,this.loggedInUser.BCProjectNumber=o,localStorage.setItem("user",JSON.stringify(this.loggedInUser)),this.projectForm.reset(),this.showAddProjectDialog=!1,r&&this.projectService.getProjectsByDealerID(this.dealers_id).subscribe(e=>{this.projects=e.sort((e,t)=>t.id-e.id)},e=>{console.log("Failed to get projects by dealer id. Error details: "+JSON.stringify(e))}),void 0===this.loggedInUser.dealers_id?window.open("/cart","_blank"):window.open("/catalog","_blank")}createBiSemASalesHeader(){let e={projectName:this.projectForm.value.projectName,isBiSemARecord:!0,documentType:"Order",selltocustomerNumber:"10000",orderDate:`${(new Date).getFullYear()}-${("0"+((new Date).getMonth()+1)).slice(-2)}-${("0"+(new Date).getDate()).slice(-2)}`};this.businessCentralService.postDetailsInDynamics(e,"BiSemASalesHeader",this.loggedInUser).subscribe(e=>{e?this.projectService.createProject({dealers_id:this.dealers_id,projectName:this.projectForm.value.projectName,remark:this.projectForm.value.projectRemark,projectNumber:e.number}).subscribe(t=>{t.data>0?this.updateUserDetailsAndLogin(t.data,this.projectForm.value.projectName,e.number,!0):this.projectErrorMessage=t.message},e=>{console.log("Error occured while creating project. Error details: "+JSON.stringify(e))}):console.log("BiSemA Sales Header not created")},e=>{console.log("error occured while calling dynamics BiSemA Sales Header call : "+JSON.stringify(e))})}cancelAddProject(){this.showAddProjectDialog=!1}ngOnInit(){localStorage.getItem("user")&&this.loadAllProjects(JSON.parse(localStorage.getItem("user")))}}return e.\u0275fac=function(t){return new(t||e)(c.Ib(i.c),c.Ib(l),c.Ib(b.a),c.Ib(n.b),c.Ib(d.a))},e.\u0275cmp=c.Cb({type:e,selectors:[["app-login"]],decls:6,vars:4,consts:[[1,"container","d-flex","h-100","align-items-center"],[1,"row","w-100"],[4,"ngIf"],["class","dialog_overlay",4,"ngIf"],["class","card dialog",4,"ngIf"],[1,"col-3"],[1,"col-6"],[1,"card"],[1,"card-body","bg-purple"],[1,"text-center","text-white"],[3,"formGroup","submit"],[1,"input-group","mb-3"],["type","text","placeholder","Your Email","formControlName","email",1,"form-control"],[1,"input-group-append"],[1,"input-group-text","fa","fa-envelope"],["type","password","placeholder","Your Password","formControlName","password",1,"form-control"],[1,"input-group-text","fa","fa-key"],[1,"text-center","text-white","mb-3"],[1,"d-flex"],[1,"switch","mr-auto"],["id","cmn-toggle-1","formControlName","dwg_2d","type","checkbox",1,"cmn-toggle","cmn-toggle-round-flat"],["for","cmn-toggle-1"],[1,"input-group","mb-3","w-25"],[1,"input-group-prepend","ml-auto"],[1,"input-group-text","fa","fa-lock"],["type","submit",1,"btn","btn-success","btn2"],[1,"fa","fa-arrow-right"],[1,"col-12"],[1,"text-center","text-white","mb-0"],[1,"btn","btn-success","btn2","new_project_button",3,"click"],[1,"card-body","pb-0","pt-0","pr-0","pl-0","project_table_header_border"],[1,"row","ml-0","mr-0","bg-purple"],[1,"col-1"],[1,"col-2"],[1,"text-white","project_table_header"],[1,"col-4"],[1,"project_table_body"],["class","row ml-0 mr-0",3,"ngClass",4,"ngFor","ngForOf"],["class","row ml-0 mr-0 bg-purple",4,"ngIf"],[1,"row","ml-0","mr-0",3,"ngClass"],[1,"col-1","pt-2","pb-2"],[1,"col-2","pt-2","pb-2"],["href","javascript:void;",3,"click"],[1,"col-4","pt-2","pb-2"],[1,"pt-2","pb-2","text-center","text-white","project_error_message"],[1,"dialog_overlay"],[1,"card","dialog"],[1,"text-white","mt-2","mr-3",2,"width","20%"],["type","text","formControlName","projectName",1,"form-control"],["formControlName","projectRemark",1,"form-control"],["class","input-group mb-3 text-white text-center","style","display: block",4,"ngIf"],[1,"mb-3","text-center"],["type","submit",1,"btn","btn-success","btn2","mr-3"],[1,"btn","btn-success","btn2",3,"click"],[1,"input-group","mb-3","text-white","text-center",2,"display","block"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.yc(2,p,31,2,"ng-container",2),c.yc(3,h,29,3,"ng-container",2),c.Nb(),c.Nb(),c.yc(4,f,1,0,"div",3),c.yc(5,j,19,2,"div",4)),2&e&&(c.xb(2),c.ec("ngIf",!t.loggedInUser),c.xb(1),c.ec("ngIf",t.loggedInUser),c.xb(1),c.ec("ngIf",t.showAddProjectDialog),c.xb(1),c.ec("ngIf",t.showAddProjectDialog))},directives:[r.m,i.s,i.j,i.g,i.b,i.i,i.f,i.a,r.l,r.k],pipes:[r.e,r.q],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(26px)}.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;overflow:auto}.btn2[_ngcontent-%COMP%]:hover{color:#000;background-color:#f5f5f5}.cmn-toggle[_ngcontent-%COMP%]{position:absolute;margin-left:-9999px;visibility:hidden}.cmn-toggle[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{display:block;position:relative;cursor:pointer;outline:none;-webkit-user-select:none;user-select:none}input.cmn-toggle-round-flat[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{padding:2px;width:40px;height:25px;background-color:#ddd;border-radius:60px;transition:background .4s}input.cmn-toggle-round-flat[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:after, input.cmn-toggle-round-flat[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{display:block;position:absolute;content:""}input.cmn-toggle-round-flat[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{top:2px;left:2px;bottom:2px;right:2px;background-color:#fff;border-radius:60px;transition:background .4s}input.cmn-toggle-round-flat[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:after{top:4px;left:4px;bottom:4px;width:15px;background-color:#ddd;border-radius:52px;transition:margin .4s,background .4s}input.cmn-toggle-round-flat[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#53386f}input.cmn-toggle-round-flat[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{margin-left:18px;background-color:#53386f}.project_table_header[_ngcontent-%COMP%]{font-size:14px!important;font-weight:700;position:relative;float:left;margin:8px 0}.project_table_header_border[_ngcontent-%COMP%]{border-top:1px solid #fff}.project_table_body[_ngcontent-%COMP%]{max-height:288px;overflow-y:auto}.project_error_message[_ngcontent-%COMP%]{width:100%}.new_project_button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:10px 10px 0 0}.project_table_even_row[_ngcontent-%COMP%]{background-color:#eedfff}.dialog[_ngcontent-%COMP%]{top:50%;left:50%;width:50em;margin-top:-9em;margin-left:-25em;position:fixed;border:none!important;z-index:9999}.dialog_overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:.4;z-index:999}']}),e})()},{path:"register",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Cb({type:e,selectors:[["app-register"]],decls:2,vars:0,template:function(e,t){1&e&&(c.Ob(0,"p"),c.zc(1,"register works!"),c.Nb())},styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(N)],n.d]}),e})(),_=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(t){return new(t||e)},imports:[[r.b,i.h,i.o,v]]}),e})()}}]);