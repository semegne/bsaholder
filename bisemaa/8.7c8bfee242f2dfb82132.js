(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{v35Q:function(t,e,n){"use strict";n.r(e),n.d(e,"CartModule",(function(){return X}));var i=n("ofXK"),r=n("tyNb"),o=n("AytR"),c=n("3Pt+"),a=n("fXoL"),s=n("PTOO"),l=n("EnSh"),b=n("c14U"),d=n("c3AT"),h=n("Yvy/");function u(t,e){if(1&t&&(a.Ob(0,"option",48),a.xc(1),a.Nb()),2&t){const t=e.$implicit;a.dc("value",t.id),a.xb(1),a.zc(" ",t.projectName," ")}}function g(t,e){if(1&t){const t=a.Pb();a.Ob(0,"span",22),a.Ob(1,"input",49),a.Vb("ngModelChange",(function(e){return a.rc(t),a.Xb().newProjectName=e})),a.Nb(),a.Nb()}if(2&t){const t=a.Xb();a.xb(1),a.cc("ngModel",t.newProjectName)}}function p(t,e){if(1&t){const t=a.Pb();a.Ob(0,"span",22),a.Ob(1,"button",23),a.Vb("click",(function(){return a.rc(t),a.Xb().cancelProjectCreate()})),a.xc(2," Cancel "),a.Nb(),a.Nb()}}function f(t,e){1&t&&(a.Ob(0,"th",32),a.xc(1,"Select"),a.Nb())}function m(t,e){1&t&&(a.Ob(0,"th"),a.xc(1,"Edit Finish"),a.Nb())}function O(t,e){if(1&t){const t=a.Pb();a.Ob(0,"td"),a.Ob(1,"input",64),a.Vb("click",(function(){a.rc(t);const e=a.Xb().$implicit;return a.Xb().checkBox(e)})),a.Nb(),a.Nb()}}function C(t,e){if(1&t){const t=a.Pb();a.Ob(0,"td"),a.Ob(1,"input",65),a.Vb("change",(function(){a.rc(t);const e=a.Xb().index;return a.Xb().editFinish(e)})),a.Nb(),a.Nb()}if(2&t){const t=a.Xb().index,e=a.Xb();a.xb(1),a.dc("value",t),a.cc("formControl",e.editCtrl.controls[t])}}function x(t,e){if(1&t&&(a.Ob(0,"span"),a.xc(1),a.Nb()),2&t){const t=e.$implicit;a.xb(1),a.yc(t)}}function N(t,e){1&t&&(a.Ob(0,"span"),a.xc(1," / price:0"),a.Nb())}function y(t,e){if(1&t&&(a.Ob(0,"span"),a.xc(1),a.Nb()),2&t){const t=a.Xb().index,e=a.Xb(2).$implicit;a.xb(1),a.Ac(" -> ",e.finishName[t]," | ",e.finishPrice[t],"")}}const P=function(t,e){return{"bg-purple text-white":t,"clr-grey":e}};function w(t,e){if(1&t){const t=a.Pb();a.Ob(0,"div",73),a.Ob(1,"a",74),a.Vb("click",(function(){a.rc(t);const n=e.$implicit,i=a.Xb().index,r=a.Xb(2).index;return a.Xb().changeOrderCode(r,i,n.name,n.PRICES.PRICE.Text,n.DESCRIPTIONS.TEXT.Text)})),a.xc(2),a.Nb(),a.Nb()}if(2&t){const t=e.$implicit,n=a.Xb().index,i=a.Xb(2).$implicit;a.xb(1),a.cc("ngClass",a.lc(2,P,t.name==i.finishCode[n],t.name!=i.finishCode[n])),a.xb(1),a.zc(" ",t.DESCRIPTIONS.TEXT.Text," ")}}function I(t,e){if(1&t&&(a.Ob(0,"div",68),a.Ob(1,"a",69),a.Jb(2,"i",70),a.xc(3),a.wc(4,N,2,0,"span",30),a.wc(5,y,2,2,"span",30),a.Nb(),a.Ob(6,"div",71),a.wc(7,w,3,5,"div",72),a.Nb(),a.Nb()),2&t){const t=e.$implicit,n=e.index,i=a.Xb(2).$implicit;a.xb(1),a.ec("href","#",t.id,"",a.sc),a.xb(2),a.zc(" ",t.DESCRIPTIONS.TEXT.Text," "),a.xb(1),a.cc("ngIf",null==i.finishName[n]),a.xb(1),a.cc("ngIf",null!=i.finishName[n]),a.xb(1),a.dc("id",t.id),a.xb(1),a.cc("ngForOf",i.finishOptions[n])}}function S(t,e){if(1&t&&(a.Ob(0,"div",66),a.wc(1,I,8,6,"div",67),a.Nb()),2&t){const t=a.Xb().$implicit;a.xb(1),a.cc("ngForOf",t.productGroup)}}function v(t,e){if(1&t){const t=a.Pb();a.Ob(0,"button",75),a.Vb("click",(function(){a.rc(t);const e=a.Xb().index;return a.Xb().stepDown(e)})),a.Nb()}}function k(t,e){if(1&t){const t=a.Pb();a.Ob(0,"button",76),a.Vb("click",(function(){a.rc(t);const e=a.Xb().index;return a.Xb().stepUp(e)})),a.Nb()}}const M=function(t){return{"bg-red":t}};function _(t,e){if(1&t){const t=a.Pb();a.Ob(0,"tr",50),a.Ob(1,"td"),a.xc(2),a.Nb(),a.Ob(3,"td"),a.Ob(4,"input",51),a.Vb("change",(function(){a.rc(t);const n=e.index;return a.Xb().changeTagName(n)})),a.Nb(),a.Nb(),a.wc(5,O,2,0,"td",30),a.wc(6,C,2,2,"td",30),a.Ob(7,"td",52),a.Jb(8,"img",53),a.Nb(),a.Ob(9,"td"),a.xc(10),a.Yb(11,"uppercase"),a.Nb(),a.Ob(12,"td"),a.xc(13),a.Yb(14,"uppercase"),a.Nb(),a.Ob(15,"td"),a.Ob(16,"p",54),a.xc(17),a.wc(18,x,2,1,"span",55),a.Nb(),a.wc(19,S,2,1,"div",56),a.Nb(),a.Ob(20,"td",57),a.Ob(21,"div",58),a.Ob(22,"div"),a.Ob(23,"p",59),a.xc(24),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(25,"td",28),a.Ob(26,"div",60),a.wc(27,v,1,0,"button",61),a.Ob(28,"input",62),a.Vb("change",(function(){a.rc(t);const n=e.index;return a.Xb().changePrice(n)})),a.Nb(),a.wc(29,k,1,0,"button",63),a.Nb(),a.Nb(),a.Ob(30,"td"),a.xc(31),a.Yb(32,"currency"),a.Nb(),a.Ob(33,"td"),a.xc(34),a.Yb(35,"currency"),a.Nb(),a.Nb()}if(2&t){const t=e.$implicit,n=e.index,i=a.Xb();a.cc("ngClass",a.kc(30,M,null==t.backgroundColor)),a.xb(2),a.yc(n+1),a.xb(2),a.cc("formControl",i.tagNameArray.controls[n])("readonly",i.isDealer),a.xb(1),a.cc("ngIf",!i.isDealer),a.xb(1),a.cc("ngIf",!i.isDealer),a.xb(2),a.hc("src","",i.baseUrl,"assets/",t.companyCode,"/",t.catalogName,"/prod_icons/",t.productImage,"",a.sc),a.xb(2),a.yc(a.Zb(11,22,t.companyCode)),a.xb(3),a.yc(a.Zb(14,24,t.catalogName)),a.xb(4),a.zc(" ",t.product_id,""),a.xb(1),a.cc("ngForOf",t.finishCode),a.xb(1),a.cc("ngIf",t.edit),a.xb(5),a.yc(t.displayName),a.xb(3),a.cc("ngIf",!i.isDealer),a.xb(1),a.cc("formControl",i.qtyArray.controls[n])("readonly",i.isDealer),a.xb(1),a.cc("ngIf",!i.isDealer),a.xb(2),a.yc(a.Zb(32,26,t.unitPrice)),a.xb(3),a.yc(a.Zb(35,28,t.quantity*t.uniPrice))}}function j(t,e){if(1&t&&(a.Ob(0,"tr"),a.Jb(1,"td",77),a.Ob(2,"td",78),a.xc(3,"Grand Total"),a.Nb(),a.Ob(4,"td",78),a.xc(5),a.Yb(6,"currency"),a.Nb(),a.Nb()),2&t){const t=a.Xb();a.xb(5),a.zc(" ",a.Zb(6,1,t.grandTotal)," ")}}function D(t,e){if(1&t){const t=a.Pb();a.Ob(0,"button",83),a.Vb("click",(function(){return a.rc(t),a.Xb(2).sendCartItemsToBusinessCentral()})),a.xc(1," Push In Business Central "),a.Nb()}}function B(t,e){1&t&&(a.Ob(0,"button",84),a.xc(1," Export To SIF File "),a.Nb())}function T(t,e){if(1&t){const t=a.Pb();a.Ob(0,"button",85),a.Vb("click",(function(){return a.rc(t),a.Xb(2).removeItem()})),a.xc(1," Delete "),a.Nb()}if(2&t){const t=a.Xb(2);a.cc("disabled",t.deleteItem)}}function A(t,e){if(1&t){const t=a.Pb();a.Ob(0,"button",86),a.Vb("click",(function(){return a.rc(t),a.Xb(2).finishEdit()})),a.xc(1," Finish Editing "),a.Nb()}if(2&t){const t=a.Xb(2);a.cc("disabled",t.finishEditing)}}function J(t,e){if(1&t&&(a.Ob(0,"div",13),a.wc(1,D,2,0,"button",79),a.wc(2,B,2,0,"button",80),a.wc(3,T,2,1,"button",81),a.wc(4,A,2,1,"button",82),a.Nb()),2&t){const t=a.Xb();a.xb(1),a.cc("ngIf",t.isDealer&&t.isBusinessCentral),a.xb(1),a.cc("ngIf",t.isDealer),a.xb(1),a.cc("ngIf",!t.isDealer),a.xb(1),a.cc("ngIf",!t.isDealer)}}const E=[{path:"",component:(()=>{class t{constructor(t,e,n,i,r,c,a){this.catalogService=t,this.router=e,this._FileSaverService=n,this.fb=i,this.cartService=r,this.projectService=c,this.businessCentralService=a,this.baseUrl=o.a.baseUrl,this.cart=[],this.selectedIndex=[],this.tagNameArray=this.fb.array([]),this.qtyArray=this.fb.array([]),this.editCtrl=this.fb.array([]),this.dealerName="Furniture Dealer",this.projectName="No Project Selected",this.projectID="",this.finishEditing=!0,this.deleteItem=!0,this.userID=0,this.isDealer=!0,this.isBusinessCentral=!0,this.newProjectName="",this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project"}order(){localStorage.setItem("cart",JSON.stringify([])),this.catalogService.sendProductCatalog();let t=[];for(var e=0;e<this.cart.length;e++){var n=this.cart[e].finishCode.toString();n=n.replace(/,/g,"");let i=new Date,r={"Catalogue Release Date":"May 23, 2019","Manufacturing Company":this.cart[e].catalog_code,"Catalogue Name":this.cart[e].code,"Order Date":i.toDateString(),id:this.cart[e].id,"Product Code":this.cart[e].id+n,Image:this.cart[e].image,Price:this.cart[e].price,Quantity:this.cart[e].qty,"Total Amount":this.cart[e].total_amount,"User Id":this.cart[e].user_id,"Long Description":this.cart[e].long_desc,"Catalogue Code":this.cart[e].code,"Company Code":this.cart[e].companyCode};t.push(r)}const i=JSON.stringify(t),r=this._FileSaverService.genType("cart.txt"),o=new Blob([i],{type:r});this._FileSaverService.save(o,"cart.txt")}logout(){"user"in localStorage&&(localStorage.removeItem("user"),this.router.navigateByUrl("/login"))}checkBox(t){if(null==this.selectedIndex.find(e=>e==t))this.selectedIndex.push(t),this.deleteItem=!1;else{let e=this.selectedIndex.findIndex(e=>e==t);this.selectedIndex.splice(e,1),0==this.selectedIndex.length&&(this.deleteItem=!0)}}removeItem(){let t=this.cart.filter(t=>this.selectedIndex.map(t=>t.id).indexOf(t.id)>-1);t&&t.length>0&&this.cartService.deleteCartItems(t.map(t=>t.id)).subscribe(t=>{console.log("delete status: "+t),this.cart=this.cart.filter(t=>this.selectedIndex.map(t=>t.id).indexOf(t.id)<0),this.loadCartDetailsWithouAPICall()},t=>{console.log("Something went wrong while delete the cart items. Error details: "+JSON.stringify(t))})}editFinish(t){let e=this.cart.findIndex(t=>1==t.edit);-1!=e&&(this.cart[e].edit=!1),this.cart[t].edit=!0,this.finishEditing=!1}changeOrderCode(t,e,n,i,r){this.cart[t].finishCode[e]=n,this.cart[t].fullSpecificationCode=this.cart[t].productID+n,this.cart[t].finishName[e]=r,null!=i&&null==this.cart[t].finishPrice[e]&&(this.cart[t].finishPrice[e]=parseFloat(i),this.cart[t].unitPrice=+this.cart[t].unitPrice+ +this.cart[t].finishPrice[e],this.cart[t].unitPrice=parseFloat(this.cart[t].unitPrice).toFixed(2)),null==this.cart[t].finishCode.find(t=>" ??"==t)&&(this.cart[t].backgroundColor="true"),this.updateAndReloadCartDetails(t)}changeTagName(t){this.cart[t].tagName=this.tagNameArray.controls[t].value,this.updateAndReloadCartDetails(t)}stepDown(t){0!=this.qtyArray.controls[t].value&&(this.qtyArray.controls[t].setValue(this.qtyArray.controls[t].value-1),this.changePrice(t))}stepUp(t){this.qtyArray.controls[t].setValue(this.qtyArray.controls[t].value+1),this.changePrice(t)}changePrice(t){this.cart[t].quantity=this.qtyArray.controls[t].value,this.updateAndReloadCartDetails(t)}updateAndReloadCartDetails(t){let e={quantity:this.cart[t].quantity,tagName:this.cart[t].tagName,finishCode:JSON.stringify(this.cart[t].finishCode),finishName:JSON.stringify(this.cart[t].finishName),finishPrice:JSON.stringify(this.cart[t].finishPrice),fullSpecificationCode:this.cart[t].fullSpecificationCode,backgroundColor:this.cart[t].backgroundColor,unitPrice:this.cart[t].unitPrice};this.cartService.updateCartItem(e,parseInt(this.cart[t].id)).subscribe(t=>{console.log("cart item update status: "+t)},t=>{console.log("Something went wrong while updating the cart. Error details: "+JSON.stringify(t))}),this.loadCartDetailsWithouAPICall()}finishEdit(){let t=0;this.editCtrl.controls.forEach(e=>{e.setValue(!1),this.cart[t]&&(this.cart[t].edit=!1,t++)})}ngOnInit(){this.setDealerAndProjectName(),this.loadCartDetails()}setDealerAndProjectName(){if("user"in localStorage){this.loggedInUser=JSON.parse(localStorage.getItem("user"));let t=this.loggedInUser.DealerName;t&&""!=t&&(this.dealerName=t);let e=this.loggedInUser.projectID;e&&e>0&&(this.projectID=e.toString());let n=this.loggedInUser.projectName;n&&""!=n&&(this.projectName=n)}}loadCartDetails(){this.loggedInUser.dealers_id>0?(this.userID=this.loggedInUser.id,this.isDealer=!1,this.loggedInUser.BCProjectNumber||(this.isBusinessCentral=!1)):this.projects||this.loadProjects(),this.cartService.getCartItemsByUserIDAndProjectID(this.userID,this.loggedInUser.projectID).subscribe(t=>{this.cart=t.data;let e=0;this.cart.length>0&&this.cart.forEach(t=>{t.finishOptions=JSON.parse(t.finishOptions),t.productGroup=JSON.parse(t.productGroup),t.finishCode=JSON.parse(t.finishCode),t.finishName=JSON.parse(t.finishName),t.finishPrice=JSON.parse(t.finishPrice),t.edit=!1,e+=+t.quantity*t.unitPrice,this.tagNameArray.push(new c.d(t.tagName)),this.qtyArray.push(new c.d(t.quantity)),this.editCtrl.push(new c.d(!1))}),this.grandTotal=parseFloat(e.toString()).toFixed(2)},t=>{console.log(`Something went wrong while getting cart items for user ${this.userID}. Error details : ${JSON.stringify(t)}`)})}loadProjects(){this.projectService.getProjectsByDealerID(this.loggedInUser.id).subscribe(t=>{this.projects=t},t=>{console.log("Failed to get projects by dealer id. Error details: "+JSON.stringify(t))})}loadCartDetailsWithouAPICall(){let t=0;this.cart.length>0&&this.cart.forEach(e=>{e.edit=!1,t+=+e.quantity*e.unitPrice,this.tagNameArray.push(new c.d(e.tagName)),this.qtyArray.push(new c.d(e.quantity)),this.editCtrl.push(new c.d(!1))}),this.grandTotal=parseFloat(t.toString()).toFixed(2)}sendCartItemsToBusinessCentral(){"user"in localStorage?this.cart&&this.cart.length>0?""!=JSON.parse(localStorage.getItem("user")).BCProjectNumber?this.checkIfItemExistsInBusinessCentral():alert("Project not created in Business Central ! Please try again after creating project in Business Central."):alert("No items in cart to push"):alert("Oops ! It seems that you have not logged in. Please login with same user as in business central to push items in business central.")}checkIfItemExistsInBusinessCentral(t=1){if(this.cart&&t<=this.cart.length){let e=this.cart[t-1];if(e.businessCentralItemNumber&&""!=e.businessCentralItemNumber)this.checkIfItemExistsInBusinessCentral(++t);else{let n=this.cart.filter(t=>t.fullSpecificationCode==e.fullSpecificationCode)[0];n&&n.businessCentralItemNumber&&""!=n.businessCentralItemNumber?(this.cart[t-1].businessCentralItemNumber=n.businessCentralItemNumber,this.checkIfItemExistsInBusinessCentral(++t)):this.checkInBusinessCentral(t)}}else this.createBisemaSalesLine(JSON.parse(localStorage.getItem("user")).BCProjectNumber)}checkInBusinessCentral(t){this.businessCentralService.getDetailsFromDynamics("BiSemAItem",`?$filter=fullSpecificationCode eq '${this.cart[t-1].fullSpecificationCode}'`).subscribe(e=>{e&&e.value&&e.value.length>0?(this.cart[t-1].businessCentralItemNumber=e.value[0].number,this.checkIfItemExistsInBusinessCentral(++t)):this.createBiSemAItem(t)},e=>{console.log("error occured while calling dynamics BiSemA Item exists check call : "+JSON.stringify(e)),this.checkIfItemExistsInBusinessCentral(++t)})}createBiSemAItem(t){let e=t-1,n={displayName:this.cart[e].displayName,baseUnitofMeasure:this.cart[e].baseUnitofMeasure,unitPrice:this.cart[e].unitPrice,userName:this.cart[e].users_id.toString(),genProdPostingGroup:this.cart[e].genProdPostingGroup,inventoryPostingGroup:this.cart[e].inventoryPostingGroup,manufacturingCompany:this.cart[e].manufacturingCompany,manufacturingCompanyThreeLettersCode:this.cart[e].manufacturingCompanyThreeLettersCode,catalogName:this.cart[e].catalogName,catalogThreeLettersCode:this.cart[e].catalogThreeLettersCode,catalogReleaseDate:this.cart[e].catalogReleaseDate,fullSpecificationCode:this.cart[e].fullSpecificationCode,tagName:this.cart[e].tagName};this.getBase64FromImageURL(`${this.baseUrl}assets/${this.cart[e].companyCode}/${this.cart[e].catalogName}/prod_icons/${this.cart[e].productImage}`,i=>{""!=i&&(n.picture=i.split("base64,")[1]),this.businessCentralService.postDetailsInDynamics(n,"BiSemAItem").subscribe(n=>{n?this.cart[e].businessCentralItemNumber=n.number:console.log("BiSemA Item not created"),this.checkIfItemExistsInBusinessCentral(++t)},e=>{console.log("error occured while calling dynamics BiSemA Item call : "+JSON.stringify(e)),this.checkIfItemExistsInBusinessCentral(++t)})})}createBisemaSalesLine(t,e=1){if(this.cart&&e<=this.cart.length){let n=e-1,i={documentType:"Order",documentNumber:t,lineNumber:1e4*e,type:"Item",number:this.cart[n].businessCentralItemNumber,description:this.cart[n].displayName,unitofMeasure:this.cart[n].baseUnitofMeasure,quantity:parseInt(this.cart[n].quantity),unitCostLcy:this.cart[n].unitPrice,directUnitCost:this.cart[n].unitPrice,lineAmount:this.cart[n].unitPrice*parseInt(this.cart[n].quantity),userName:this.cart[n].users_id.toString(),manufacturingCompany:this.cart[n].manufacturingCompany,manufacturingCompanyThreeLettersCode:this.cart[n].manufacturingCompanyThreeLettersCode,catalogName:this.cart[n].catalogName,catalogThreeLettersCode:this.cart[n].catalogThreeLettersCode,catalogReleaseDate:this.cart[n].catalogReleaseDate,fullSpecificationCode:this.cart[n].fullSpecificationCode};this.businessCentralService.postDetailsInDynamics(i,"BiSemASalesLine").subscribe(i=>{i?e===this.cart.length?this.projectService.updateProject({isClosed:1,orderConfirmationDate:new Date},JSON.parse(localStorage.getItem("user")).projectID).subscribe(t=>{alert("Details pushed to Dynamics Business Central !!"),this.loadCartDetails(),console.log("project update status: "+t)},t=>{console.log("Something went wrong while updating project details. Error details: "+JSON.stringify(t))}):this.createBisemaSalesLine(t,++e):console.log("error occured while calling dynamics BiSemA Sales Line call for "+this.cart[n].businessCentralItemNumber)},t=>{console.log("error occured while calling dynamics BiSemA Sales Line call : "+JSON.stringify(t))})}}getBase64FromImageURL(t,e){const n=new XMLHttpRequest;n.onload=()=>{if(200===n.status){const t=new FileReader;t.onloadend=()=>{e(t.result)},t.readAsDataURL(n.response)}else console.log("image not found at "+t),e("")},n.open("GET",t),n.responseType="blob",n.send()}projectSelectionChange(){const t=parseInt(this.projectID,10);this.loggedInUser.projectID!=t&&(this.loggedInUser.projectID=t,this.loggedInUser.projectName=this.projects.filter(e=>e.id===t)[0].projectName,localStorage.setItem("user",JSON.stringify(this.loggedInUser)),this.setDealerAndProjectName(),this.loadCartDetails())}cloneProject(){this.isNeedToShowNewProjectName?""!=this.newProjectName&&this.projectService.checkIfExistsWithName(this.loggedInUser.id,this.newProjectName).subscribe(t=>{0==t.data?this.createBiSemASalesHeader():alert(t.message)},t=>{console.log("Error occured while checking if project exists same name or not. Error details: "+JSON.stringify(t))}):(this.newProjectName=this.projectName+" - cloned",this.isNeedToShowNewProjectName=!0,this.cloneProjectButtonText="Create project")}createBiSemASalesHeader(){let t={documentType:"Order",selltocustomerNumber:"10000",orderDate:`${(new Date).getFullYear()}-${("0"+((new Date).getMonth()+1)).slice(-2)}-${("0"+(new Date).getDate()).slice(-2)}`};this.businessCentralService.postDetailsInDynamics(t,"BiSemASalesHeader",this.loggedInUser).subscribe(t=>{t?this.projectService.createProject({dealers_id:this.loggedInUser.id,projectName:this.newProjectName,projectNumber:t.number}).subscribe(t=>{t.data>0?this.cloneCartItems(parseInt(t.data)):alert(t.message)},t=>{console.log("Error occured while creating project. Error details: "+JSON.stringify(t))}):console.log("BiSemA Sales Header not created")},t=>{console.log("error occured while calling dynamics BiSemA Sales Header call : "+JSON.stringify(t))})}cloneCartItems(t){if(this.cart&&this.cart.length>0){let e=this.cart.map(t=>function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["id"]));e.forEach(e=>{e.finishOptions=JSON.stringify(e.finishOptions),e.productGroup=JSON.stringify(e.productGroup),e.finishCode=JSON.stringify(e.finishCode),e.finishName=JSON.stringify(e.finishName),e.finishPrice=JSON.stringify(e.finishPrice),e.projects_id=t}),this.cartService.createMultipleCartItems(e).subscribe(t=>{t.data>0?(this.loadProjects(),this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project",alert("Project has been cloned successfully. It will get populated in selection list.")):alert(t.message)},t=>{console.log("error occured while calling dynamics BiSemA Sales Header call : "+JSON.stringify(t))})}}cancelProjectCreate(){this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project"}}return t.\u0275fac=function(e){return new(e||t)(a.Ib(s.a),a.Ib(r.b),a.Ib(l.c),a.Ib(c.c),a.Ib(b.a),a.Ib(d.a),a.Ib(h.a))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-cart"]],decls:97,vars:19,consts:[[1,"navbar","navbar-dark","bg-purple","navbar-expand-sm"],["href","http://www.bisema.com","target","_blank",1,"navbar-brand"],["src","../../assets/img/bisema_logo.jpg","alt","logo","height","40"],[1,"dropdown","ml-auto","dropleft"],["href","#","id","navbarDropdownMenuLink","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","text-white"],[1,"fa","fa-user-circle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],["href","#",1,"dropdown-item"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"row"],[1,"col-12","content","text-center"],[1,"title"],[1,"col-12","content"],[1,"col-12"],[1,"mt-2","mb-2"],[1,"fa","fa-cogs"],[1,"fa","fa-users"],[1,"pt-2"],[1,"width:","30%;","ml-2"],["id","projects",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[1,"fa","fa-cogs","btn","btn-dark","btn-sm","btn2","p-2",3,"click"],[1,"pt-2","ml-2"],[1,"bar","col-12","text-center"],[1,"table","table-bordered"],[1,"thead-light"],[1,"text-center"],["scope","col",4,"ngIf"],[4,"ngIf"],["scope","col",1,"bordNone"],["scope","col"],["class","text-center data",3,"ngClass",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"row","bg-purple","pt-3"],[1,"col-12","blackfter"],[1,"d-flex","justify-content-center"],[1,"list-inline","list-unstyled","m-0"],[1,"list-inline-item"],["href","https://www.facebook.com","target","https://www.facebook.com/bisemacorp"],[1,"fa","fa-facebook","fa-2x","mr-2"],["href","https://www.linkedin.com ","target","https://www.linkedin.com/bisema-corporation "],[1,"fa","fa-linkedin","fa-2x","mr-2"],["href","https://www.twitter.com ","target","https://www.twitter.com/bisemacorp "],[1,"fa","fa-twitter-square","fa-2x"],[1,"text-center","mt-3"],[1,"text-white"],[3,"value"],["type","text","name","newProjectName","id","newProjectName","placeholder","Enter new project name",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center","data",3,"ngClass"],["type","text","placeholder","Type tagname ...",1,"tag-name",3,"formControl","readonly","change"],[1,"img-hover-zoom"],["width","100","alt","Buy",3,"src"],[1,"code","text-left"],[4,"ngFor","ngForOf"],["class","text-left","id","c-collapse",4,"ngIf"],[1,"bordNone"],[1,"cart-info"],[1,"text-left"],[1,"number-input"],["type","button",3,"click",4,"ngIf"],["min","1","name","quantity","value","1","type","number",1,"quantity","form-control","mkbld","p-0","mx-auto",3,"formControl","readonly","change"],["type","button","class","plus",3,"click",4,"ngIf"],["type","checkbox",3,"click"],["type","radio","name","finish","id","",3,"formControl","value","change"],["id","c-collapse",1,"text-left"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],["data-toggle","collapse",1,"text-dark",3,"href"],[1,"fa","fa-caret-right","text-dark"],["data-parent","#c-collapse",1,"collapse",3,"id"],["class","",4,"ngFor","ngForOf"],[1,""],["href","javascript:;",1,"side-child-item","p-1",3,"ngClass","click"],["type","button",3,"click"],["type","button",1,"plus",3,"click"],["colspan","10"],[1,"font-weight-bold","text-center"],["class","float-right btn btn2 mr-5 fa fa-address-book",3,"click",4,"ngIf"],["class","float-right btn btn2 mr-5 fa fa-address-book",4,"ngIf"],["class","float-right btn btn3 ml-2 mr-5 fa fa-trash",3,"disabled","click",4,"ngIf"],["class","float-right btn btn2 mr-5 fa fa-edit",3,"disabled","click",4,"ngIf"],[1,"float-right","btn","btn2","mr-5","fa","fa-address-book",3,"click"],[1,"float-right","btn","btn2","mr-5","fa","fa-address-book"],[1,"float-right","btn","btn3","ml-2","mr-5","fa","fa-trash",3,"disabled","click"],[1,"float-right","btn","btn2","mr-5","fa","fa-edit",3,"disabled","click"]],template:function(t,e){1&t&&(a.Ob(0,"nav",0),a.Ob(1,"a",1),a.Jb(2,"img",2),a.Nb(),a.Ob(3,"div",3),a.Ob(4,"a",4),a.Jb(5,"i",5),a.Nb(),a.Ob(6,"div",6),a.Ob(7,"a",7),a.xc(8,"Dashboard"),a.Nb(),a.Ob(9,"a",7),a.xc(10,"Edit Profile"),a.Nb(),a.Ob(11,"a",8),a.Vb("click",(function(){return e.logout()})),a.xc(12,"Log Out"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(13,"div",9),a.Ob(14,"div",10),a.Ob(15,"h4",11),a.xc(16,"Shopping Cart"),a.Nb(),a.Nb(),a.Ob(17,"div",12),a.Ob(18,"div",9),a.Ob(19,"div",13),a.Ob(20,"h6",14),a.Ob(21,"div"),a.Jb(22,"i",15),a.xc(23),a.Jb(24,"i",16),a.xc(25),a.Nb(),a.Ob(26,"div",9),a.Ob(27,"span",17),a.Jb(28,"i",15),a.Nb(),a.Ob(29,"span",18),a.Ob(30,"select",19),a.Vb("ngModelChange",(function(t){return e.projectID=t}))("change",(function(){return e.projectSelectionChange()})),a.wc(31,u,2,2,"option",20),a.Nb(),a.Nb(),a.wc(32,g,2,1,"span",21),a.Ob(33,"span",22),a.Ob(34,"button",23),a.Vb("click",(function(){return e.cloneProject()})),a.xc(35),a.Nb(),a.Nb(),a.wc(36,p,3,0,"span",21),a.Ob(37,"span",24),a.Jb(38,"i",16),a.xc(39),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(40,"div",25),a.Ob(41,"div",9),a.Ob(42,"div",13),a.Ob(43,"h6"),a.Ob(44,"strong"),a.xc(45," List of Products in Cart"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Jb(46,"hr"),a.Nb(),a.Ob(47,"table",26),a.Ob(48,"thead",27),a.Ob(49,"tr",28),a.Ob(50,"th"),a.xc(51,"Item Number"),a.Nb(),a.Ob(52,"th"),a.xc(53,"Tagname"),a.Nb(),a.wc(54,f,2,0,"th",29),a.wc(55,m,2,0,"th",30),a.Ob(56,"th"),a.xc(57,"Product Image"),a.Nb(),a.Ob(58,"th"),a.xc(59,"Mfg"),a.Nb(),a.Ob(60,"th"),a.xc(61,"Cat"),a.Nb(),a.Ob(62,"th"),a.xc(63,"Order Code"),a.Nb(),a.Ob(64,"th",31),a.xc(65,"Product Descriptions"),a.Nb(),a.Ob(66,"th",32),a.xc(67,"Quantity"),a.Nb(),a.Ob(68,"th",32),a.xc(69,"Unit Price"),a.Nb(),a.Ob(70,"th",32),a.xc(71,"Total Price"),a.Nb(),a.Nb(),a.Nb(),a.Ob(72,"tbody"),a.wc(73,_,36,32,"tr",33),a.wc(74,j,7,3,"tr",30),a.Nb(),a.Nb(),a.wc(75,J,5,4,"div",34),a.Ob(76,"div",13),a.Jb(77,"hr"),a.Nb(),a.Nb(),a.Ob(78,"div",35),a.Ob(79,"div",36),a.Ob(80,"div",37),a.Ob(81,"ul",38),a.Ob(82,"li",39),a.Ob(83,"a",40),a.Jb(84,"i",41),a.Nb(),a.Nb(),a.Ob(85,"li",39),a.Ob(86,"a",42),a.Jb(87,"i",43),a.Nb(),a.Nb(),a.Ob(88,"li",39),a.Ob(89,"a",44),a.Jb(90,"i",45),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(91,"div",46),a.Ob(92,"p",47),a.xc(93," Copyright "),a.Ob(94,"span"),a.xc(95,"\xa9"),a.Nb(),a.xc(96," 2021 BiSemA Corporation. "),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&t&&(a.xb(21),a.uc(e.isDealer?"display: none":""),a.xb(2),a.zc(" ",e.projectName,"\xa0\xa0\xa0\xa0\xa0\xa0 "),a.xb(2),a.zc(" ",e.dealerName," "),a.xb(1),a.uc(e.isDealer?"":"display: none"),a.xb(4),a.cc("ngModel",e.projectID),a.xb(1),a.cc("ngForOf",e.projects),a.xb(1),a.cc("ngIf",e.isNeedToShowNewProjectName),a.xb(3),a.zc(" ",e.cloneProjectButtonText," "),a.xb(1),a.cc("ngIf",e.isNeedToShowNewProjectName),a.xb(3),a.zc(" ",e.dealerName," "),a.xb(15),a.cc("ngIf",!e.isDealer),a.xb(1),a.cc("ngIf",!e.isDealer),a.xb(18),a.cc("ngForOf",e.cart),a.xb(1),a.cc("ngIf",e.cart.length>0),a.xb(1),a.cc("ngIf",e.cart.length>0))},directives:[c.p,c.i,c.k,i.k,i.l,c.l,c.r,c.b,i.j,c.e,c.m,c.n],pipes:[i.p,i.c],styles:['.navbar[_ngcontent-%COMP%]{margin:0;background-color:#53386f}.nav-2[_ngcontent-%COMP%]{font-weight:700;height:50px}.nav-2[_ngcontent-%COMP%]   .fa-bookmark[_ngcontent-%COMP%]{color:grey}.nav-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{float:right;margin-right:10px;font-weight:500}.nav-2[_ngcontent-%COMP%]   .btn-1[_ngcontent-%COMP%]{background-color:#53386f}.profile[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:wheat;font-size:50px}.fa[_ngcontent-%COMP%]{color:#fff}.fa-cogs[_ngcontent-%COMP%], .fa-users[_ngcontent-%COMP%]{color:#000}.title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;margin-top:10px}.content[_ngcontent-%COMP%]{background-color:#f3f3f3;border-bottom:1px solid #bbb}.content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}.row[_ngcontent-%COMP%]{margin:0}.bar[_ngcontent-%COMP%]{margin-top:40px}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#53386f;color:#fff;border:none;margin-left:10px}.cart-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.cart-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:80px;margin-right:10px}.bordNone[_ngcontent-%COMP%]{border-right:none}.bordNone1[_ngcontent-%COMP%]{border-left:none}table[_ngcontent-%COMP%]{overflow-x:hidden}.code[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:500}.data[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px}.buttons1[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{background-color:#53386f;color:#fff;margin-left:5px;margin-bottom:25px}.table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:600}.mkbld[_ngcontent-%COMP%]{text-align:center;font-weight:700}.tag-name[_ngcontent-%COMP%]{text-align:left;width:250px!important;height:30px;border:none;border-bottom:2px solid #a49aaf;border-radius:3px;background-color:#f8f2f2}.tag-name[_ngcontent-%COMP%]:focus{outline:none}.tag-name[_ngcontent-%COMP%]:focus::placeholder{font-size:10px}.btn2[_ngcontent-%COMP%]{color:#f5f5f5;background-color:#53386f}.btn2[_ngcontent-%COMP%]:hover{color:#000;background-color:#f5f5f5}.btn3[_ngcontent-%COMP%]{color:#f5f5f5;background-color:#d9534f}.btn3[_ngcontent-%COMP%]:hover{color:#000;background-color:#f5f5f5}@supports (-webkit-appearance:none) or (-moz-appearance:none){input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{--active:#53386f;--active-inner:#fff;--focus:2px rgba(39,94,254,0.3);--border:#bbc1e1;--border-hover:#275efe;--background:#fff;--disabled:#f6f8ff;--disabled-inner:#e1e6f9;-webkit-appearance:none;-moz-appearance:none;height:18px;outline:none;display:inline-block;vertical-align:top;position:relative;margin:0;cursor:pointer;border:.9px solid var(--bc,var(--border));background:var(--b,var(--background));transition:background .3s,border-color .3s,box-shadow .2s}input[type=checkbox][_ngcontent-%COMP%]:after, input[type=radio][_ngcontent-%COMP%]:after{content:"";display:block;left:0;top:0;position:absolute;transition:transform var(--d-t,.3s) var(--d-t-e,ease),opacity var(--d-o,.2s)}input[type=checkbox][_ngcontent-%COMP%]:checked, input[type=radio][_ngcontent-%COMP%]:checked{--b:var(--active);--bc:var(--active);--d-o:.3s;--d-t:.6s;--d-t-e:cubic-bezier(.2,.85,.32,1.2)}input[type=checkbox][_ngcontent-%COMP%]:disabled, input[type=radio][_ngcontent-%COMP%]:disabled{--b:var(--disabled);cursor:not-allowed;opacity:.9}input[type=checkbox][_ngcontent-%COMP%]:disabled:checked, input[type=radio][_ngcontent-%COMP%]:disabled:checked{--b:var(--disabled-inner);--bc:var(--border)}input[type=checkbox][_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{cursor:not-allowed}input[type=checkbox][_ngcontent-%COMP%]:hover:not(:checked):not(:disabled), input[type=radio][_ngcontent-%COMP%]:hover:not(:checked):not(:disabled){--bc:var(--border-hover)}input[type=checkbox][_ngcontent-%COMP%]:focus, input[type=radio][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 var(--focus)}input[type=checkbox][_ngcontent-%COMP%]:not(.switch), input[type=radio][_ngcontent-%COMP%]:not(.switch){width:18px}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):after, input[type=radio][_ngcontent-%COMP%]:not(.switch):after{opacity:var(--o,0)}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):checked, input[type=radio][_ngcontent-%COMP%]:not(.switch):checked{--o:1}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:14px;line-height:21px;display:inline-block;vertical-align:top;cursor:pointer;margin-left:4px}input[type=checkbox][_ngcontent-%COMP%]:not(.switch){border-radius:7px}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):after{width:5px;height:7px;border:2px solid var(--active-inner);border-top:0;border-left:0;left:5px;top:3px;transform:rotate(var(--r,20deg))}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):checked{--r:43deg}input[type=radio][_ngcontent-%COMP%]{border-radius:50%}input[type=radio][_ngcontent-%COMP%]:after{width:16px;height:16px;border-radius:40%;bottom:200%;right:200%;background:var(--active-inner);opacity:0;transform:scale(var(--s,.5))}input[type=radio][_ngcontent-%COMP%]:checked{--s:.5}}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}.number-input[_ngcontent-%COMP%]{border:1px solid #aca4a4;border-radius:5px;display:inline-flex}.number-input[_ngcontent-%COMP%], .number-input[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;-webkit-appearance:none;background-color:initial;border:none;align-items:center;justify-content:center;width:2rem;height:2rem;cursor:pointer;margin:0;position:relative}.number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after, .number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{display:inline-block;position:absolute;top:50%;content:"";width:12px;height:1px;background-color:#212121;border-radius:5px;transform:translate(-50%,-50%)}.number-input[_ngcontent-%COMP%]   button.plus[_ngcontent-%COMP%]:after{transform:translate(-50%,-50%) rotate(90deg)}.number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;border-radius:5px;box-shadow:1px 1px 1px 1px}.number-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-family:sans-serif;max-width:3rem;padding:.1rem;border:solid #ddd;border-width:0 2px;font-size:14px;height:2rem;font-weight:700;text-align:center}']}),t})()}];let F=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[r.d.forChild(E)],r.d]}),t})(),X=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[i.b,c.h,c.o,F]]}),t})()}}]);