(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{v35Q:function(t,e,i){"use strict";i.r(e),i.d(e,"CartModule",(function(){return st}));var n=i("hO9l"),o=i("ofXK"),a=i("tyNb"),c=i("AytR"),r=i("3Pt+"),s=i("mW75"),l=i("fXoL"),d=i("c14U"),b=i("c3AT"),h=i("PTOO"),u=i("Yvy/"),g=i("a46E");const p=["stickyMenu"],f=["cartCheckboxes"];function m(t,e){if(1&t&&(l.Ob(0,"div",41),l.Ob(1,"h4",42),l.Jb(2,"i",43),l.Ob(3,"small",44),l.Ob(4,"b"),l.zc(5," Project Name : "),l.Nb(),l.Nb(),l.zc(6),l.Nb(),l.Ob(7,"h4",45),l.Jb(8,"i",46),l.Ob(9,"small",44),l.Ob(10,"b"),l.zc(11," Dealer Name : "),l.Nb(),l.Nb(),l.zc(12),l.Nb(),l.Nb()),2&t){const t=l.Xb();l.xb(6),l.Ac(t.projectName),l.xb(6),l.Ac(t.dealerName)}}function O(t,e){if(1&t&&(l.Ob(0,"option",60),l.zc(1),l.Nb()),2&t){const t=e.$implicit;l.fc("value",t.id),l.xb(1),l.Bc(" ",t.projectName," ")}}function C(t,e){1&t&&l.Jb(0,"div",61)}function N(t,e){if(1&t){const t=l.Pb();l.Ob(0,"span",62),l.Ob(1,"span",47),l.Jb(2,"i",43),l.Ob(3,"small",44),l.Ob(4,"b"),l.zc(5," New Project Name : "),l.Nb(),l.Nb(),l.Nb(),l.Ob(6,"span",48),l.Ob(7,"input",63),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb(2).newProjectName=e})),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.Xb(2);l.xb(7),l.ec("ngModel",t.newProjectName)}}function P(t,e){if(1&t){const t=l.Pb();l.Ob(0,"span",48),l.Ob(1,"button",64),l.Vb("click",(function(){return l.uc(t),l.Xb(2).cloneProject()})),l.zc(2),l.Nb(),l.Nb()}if(2&t){const t=l.Xb(2);l.xb(2),l.Bc(" ",t.cloneProjectButtonText," ")}}function y(t,e){if(1&t){const t=l.Pb();l.Ob(0,"span",48),l.Ob(1,"button",64),l.Vb("click",(function(){return l.uc(t),l.Xb(2).cancelProjectCreate()})),l.zc(2," Cancel "),l.Nb(),l.Nb()}}function x(t,e){if(1&t&&(l.Ob(0,"option",60),l.zc(1),l.Yb(2,"uppercase"),l.Nb()),2&t){const t=e.$implicit;l.fc("value",t.CompanyName),l.xb(1),l.Bc(" ",l.Zb(2,2,t.CompanyName)," ")}}function I(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",41),l.Ob(1,"h4",42),l.Ob(2,"span",47),l.Jb(3,"i",43),l.Ob(4,"small",44),l.Ob(5,"b"),l.zc(6," Project Name : "),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"span",48),l.Ob(8,"select",49),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb().projectID=e}))("change",(function(){return l.uc(t),l.Xb().projectSelectionChange()})),l.Ob(9,"option",50),l.zc(10,"Select project"),l.Nb(),l.yc(11,O,2,2,"option",51),l.Nb(),l.Nb(),l.yc(12,C,1,0,"div",52),l.yc(13,N,8,1,"span",53),l.yc(14,P,3,1,"span",54),l.yc(15,y,3,0,"span",54),l.Nb(),l.Ob(16,"h4",55),l.Jb(17,"i",46),l.Ob(18,"small",44),l.Ob(19,"b"),l.zc(20," Dealer Name : "),l.Nb(),l.Nb(),l.zc(21),l.Nb(),l.Ob(22,"h4",42),l.Ob(23,"span",56),l.Ob(24,"select",57),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb().manufacturingCompany=e}))("change",(function(){return l.uc(t),l.Xb().manufacturingCompanySelectionChange()})),l.Ob(25,"option",58),l.zc(26,"Manufacturing Company"),l.Nb(),l.yc(27,x,3,4,"option",51),l.Nb(),l.Nb(),l.Ob(28,"span",59),l.Jb(29,"i",43),l.Ob(30,"small",44),l.Ob(31,"b"),l.zc(32," Filter Manufacturing Company : "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.Xb();l.xb(8),l.ec("ngModel",t.projectID),l.xb(3),l.ec("ngForOf",t.projects),l.xb(1),l.ec("ngIf",t.isNeedToShowNewProjectName),l.xb(1),l.ec("ngIf",t.isNeedToShowNewProjectName),l.xb(1),l.ec("ngIf","0"!=t.projectID),l.xb(1),l.ec("ngIf",t.isNeedToShowNewProjectName),l.xb(6),l.Bc("",t.dealerName," "),l.xb(3),l.ec("ngModel",t.manufacturingCompany),l.xb(3),l.ec("ngForOf",t.manufacturingCompanies)}}function v(t,e){if(1&t&&l.Jb(0,"app-tabs",65),2&t){const t=l.Xb();l.ec("cartCount",null==t.cart?null:t.cart.length)}}function w(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",13),l.Ob(1,"h4",66),l.Ob(2,"a",67),l.Vb("click",(function(){return l.uc(t),l.Xb().onHide()})),l.Jb(3,"i",68),l.Nb(),l.Nb(),l.Ob(4,"h4",69),l.zc(5," List of products in cart "),l.Nb(),l.Ob(6,"h4",70),l.Ob(7,"a",71),l.Vb("click",(function(){return l.uc(t),l.Xb().showSpecialOrderForm()})),l.Ob(8,"h4"),l.Ob(9,"u"),l.zc(10,"Order Special Product"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.Xb();l.xb(7),l.ec("ngClass",t.needToEnableSpecialOrderLink?"":"link_disabled")}}function S(t,e){1&t&&(l.Ob(0,"div",13),l.Ob(1,"h4",72),l.zc(2," List of products in cart "),l.Nb(),l.Nb())}function E(t,e){if(1&t&&(l.Ob(0,"a",86),l.Jb(1,"img",87),l.Nb()),2&t){const t=l.Xb(2);l.fc("href",t.companyUrl,l.vc),l.xb(1),l.ic("src","",t.baseUrl,"assets/",t.companyCode,"/logo/",t.logo,"",l.vc)}}function M(t,e){if(1&t&&(l.Ob(0,"option",60),l.zc(1),l.Nb()),2&t){const t=e.$implicit;l.fc("value",t.CompanyName),l.xb(1),l.Ac(t.CompanyName)}}function D(t,e){if(1&t&&(l.Ob(0,"option",60),l.zc(1),l.Nb()),2&t){const t=e.$implicit;l.fc("value",t.name),l.xb(1),l.Ac(t.name)}}function k(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",88),l.Ob(1,"input",89,90),l.Vb("keyup",(function(){l.uc(t);const e=l.rc(2);return l.Xb(2).carttree.treeModel.filterNodes(e.value)})),l.Nb(),l.Ob(3,"div",91),l.Ob(4,"span",92),l.Vb("click",(function(){return l.uc(t),l.Xb(2).carttree.treeModel.clearFilter()})),l.Jb(5,"i",93),l.Nb(),l.Nb(),l.Nb()}}function _(t,e){if(1&t&&(l.Ob(0,"a",80),l.zc(1),l.Nb()),2&t){const t=l.Xb(2);l.xb(1),l.Ac(t.catalogue.desc)}}function L(t,e){if(1&t){const t=l.Pb();l.Ob(0,"tree-root",94,95),l.Vb("activate",(function(e){return l.uc(t),l.Xb(2).onEvent(e)})),l.Nb()}if(2&t){const t=l.Xb(2);l.ec("options",t.options)("nodes",t.cart_nodes)}}const T=function(t){return{fixedPosition:t}},j=function(t){return{fixedMenuHeight:t}};function A(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",73,74),l.Ob(2,"div",75),l.Ob(3,"span",76),l.Ob(4,"span"),l.zc(5,"Manufacturing Company"),l.Nb(),l.yc(6,E,2,4,"a",77),l.Nb(),l.Ob(7,"select",78),l.Vb("change",(function(){return l.uc(t),l.Xb().onCompanyChange()})),l.yc(8,M,2,2,"option",51),l.Nb(),l.Nb(),l.Ob(9,"div",79),l.Ob(10,"a",80),l.zc(11),l.Yb(12,"uppercase"),l.Nb(),l.Ob(13,"select",81),l.Vb("change",(function(){return l.uc(t),l.Xb().getCatalogue()})),l.Ob(14,"option",82),l.zc(15,"Select Catalogue"),l.Nb(),l.yc(16,D,2,2,"option",51),l.Nb(),l.yc(17,k,6,0,"div",83),l.yc(18,_,2,1,"a",84),l.yc(19,L,2,2,"tree-root",85),l.Nb(),l.Nb()}if(2&t){const t=l.Xb();l.ec("ngClass",l.mc(13,T,1==t.sticky)),l.xb(6),l.ec("ngIf",""!=t.companyCode&&""!=t.logo),l.xb(1),l.ec("formControl",t.companyControl),l.xb(1),l.ec("ngForOf",t.companies),l.xb(1),l.ec("ngClass",l.mc(15,j,1==t.sticky)),l.xb(2),l.Bc(" ",l.Zb(12,11,t.companyCode)," Catalogue "),l.xb(2),l.ec("formControl",t.catalogControl),l.xb(3),l.ec("ngForOf",t.companyCatalogues),l.xb(1),l.ec("ngIf",t.catalogue),l.xb(1),l.ec("ngIf",t.catalogue),l.xb(1),l.ec("ngIf",t.catalogue)}}function B(t,e){1&t&&(l.Ob(0,"th",22),l.zc(1,"Select"),l.Nb())}function z(t,e){1&t&&(l.Ob(0,"th"),l.zc(1,"Edit Finish"),l.Nb())}function V(t,e){if(1&t){const t=l.Pb();l.Ob(0,"td"),l.Ob(1,"input",108,109),l.Vb("click",(function(){l.uc(t);const e=l.Xb().$implicit;return l.Xb().checkBox(e)})),l.Nb(),l.Nb()}}function X(t,e){if(1&t){const t=l.Pb();l.Ob(0,"td"),l.Ob(1,"input",110),l.Vb("click",(function(e){l.uc(t);const i=l.Xb().index;return l.Xb().editFinish(i,e)})),l.Nb(),l.Nb()}if(2&t){const t=l.Xb().index,e=l.Xb();l.xb(1),l.fc("value",t),l.ec("formControl",e.editCtrl.controls[t])}}function F(t,e){if(1&t&&(l.Ob(0,"span"),l.zc(1),l.Nb()),2&t){const t=e.$implicit;l.xb(1),l.Ac(t)}}function U(t,e){if(1&t&&(l.Ob(0,"p",111),l.zc(1),l.yc(2,F,2,1,"span",112),l.Nb()),2&t){const t=l.Xb().$implicit;l.xb(1),l.Bc(" ",t.productID," "),l.xb(1),l.ec("ngForOf",t.finishCode)}}function J(t,e){if(1&t&&(l.Ob(0,"p",111),l.zc(1),l.Nb()),2&t){const t=l.Xb().$implicit;l.xb(1),l.Bc(" ",t.fullSpecificationCode," ")}}function $(t,e){1&t&&(l.Ob(0,"span"),l.zc(1," / price:0"),l.Nb())}function R(t,e){if(1&t&&(l.Ob(0,"span"),l.zc(1),l.Nb()),2&t){const t=l.Xb().index,e=l.Xb(2).$implicit;l.xb(1),l.Cc(" -> ",e.finishName[t]," | ",e.finishPrice[t],"")}}const q=function(t,e){return{"bg-purple text-white":t,"clr-grey":e}};function G(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",120),l.Ob(1,"a",121),l.Vb("click",(function(){l.uc(t);const i=e.$implicit,n=l.Xb().index,o=l.Xb(2).index;return l.Xb().changeOrderCode(o,n,i.name,i.PRICES.PRICE.Text,i.DESCRIPTIONS.TEXT.Text)})),l.zc(2),l.Nb(),l.Nb()}if(2&t){const t=e.$implicit,i=l.Xb().index,n=l.Xb(2).$implicit;l.xb(1),l.ec("ngClass",l.nc(2,q,t.name==n.finishCode[i],t.name!=n.finishCode[i])),l.xb(1),l.Bc(" ",t.DESCRIPTIONS.TEXT.Text," ")}}function W(t,e){if(1&t&&(l.Ob(0,"div",115),l.Ob(1,"a",116),l.Jb(2,"i",117),l.zc(3),l.yc(4,$,2,0,"span",20),l.yc(5,R,2,2,"span",20),l.Nb(),l.Ob(6,"div",118),l.yc(7,G,3,5,"div",119),l.Nb(),l.Nb()),2&t){const t=e.$implicit,i=e.index,n=l.Xb(2).$implicit;l.xb(1),l.gc("href","#",t.id,"",l.vc),l.xb(2),l.Bc(" ",t.DESCRIPTIONS.TEXT.Text," "),l.xb(1),l.ec("ngIf",null==n.finishName[i]),l.xb(1),l.ec("ngIf",null!=n.finishName[i]),l.xb(1),l.fc("id",t.id),l.xb(1),l.ec("ngForOf",n.finishOptions[i])}}function Y(t,e){if(1&t&&(l.Ob(0,"div",113),l.yc(1,W,8,6,"div",114),l.Nb()),2&t){const t=l.Xb().$implicit;l.xb(1),l.ec("ngForOf",t.productGroup)}}const H=function(t){return{"bg-red":t}};function Z(t,e){if(1&t){const t=l.Pb();l.Ob(0,"tr",96),l.Ob(1,"b"),l.Ob(2,"td"),l.zc(3),l.Nb(),l.Nb(),l.Ob(4,"td"),l.Ob(5,"input",97),l.Vb("change",(function(){l.uc(t);const i=e.index;return l.Xb().changeTagName(i)})),l.Nb(),l.Nb(),l.yc(6,V,3,0,"td",20),l.yc(7,X,2,2,"td",20),l.Ob(8,"td",98),l.Jb(9,"img",99),l.Nb(),l.Ob(10,"td"),l.zc(11),l.Yb(12,"uppercase"),l.Nb(),l.Ob(13,"td"),l.zc(14),l.Yb(15,"uppercase"),l.Nb(),l.Ob(16,"td"),l.yc(17,U,3,2,"p",100),l.yc(18,J,2,1,"p",100),l.yc(19,Y,2,1,"div",101),l.Nb(),l.Ob(20,"td",102),l.Ob(21,"div",103),l.Ob(22,"div"),l.Ob(23,"p",18),l.zc(24),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(25,"td",18),l.Ob(26,"div",104),l.Ob(27,"button",105),l.Vb("click",(function(){l.uc(t);const i=e.index;return l.Xb().stepDown(i)})),l.Nb(),l.Ob(28,"input",106),l.Vb("change",(function(){l.uc(t);const i=e.index;return l.Xb().changePrice(i)})),l.Nb(),l.Ob(29,"button",107),l.Vb("click",(function(){l.uc(t);const i=e.index;return l.Xb().stepUp(i)})),l.Nb(),l.Nb(),l.Nb(),l.Ob(30,"td"),l.zc(31),l.Yb(32,"currency"),l.Nb(),l.Ob(33,"td"),l.zc(34),l.Yb(35,"currency"),l.Nb(),l.Nb()}if(2&t){const t=e.$implicit,i=e.index,n=l.Xb();l.ec("ngClass",l.mc(27,H,""==t.backgroundColor)),l.xb(3),l.Bc("",i+1,")"),l.xb(2),l.ec("formControl",n.tagNameArray.controls[i])("readonly",n.isDealer),l.xb(1),l.ec("ngIf",!n.isDealer),l.xb(1),l.ec("ngIf",!n.isDealer),l.xb(2),l.jc("src","",n.baseUrl,"assets/",t.companyCode,"/",t.catalogName,"/prod_icons/",t.productImage,"",l.vc),l.xb(2),l.Ac(l.Zb(12,19,t.companyCode)),l.xb(3),l.Ac(l.Zb(15,21,t.catalogName)),l.xb(3),l.ec("ngIf",!t.isSpecialProduct),l.xb(1),l.ec("ngIf",t.isSpecialProduct),l.xb(1),l.ec("ngIf",t.edit),l.xb(5),l.Ac(t.displayName),l.xb(4),l.ec("formControl",n.qtyArray.controls[i]),l.xb(3),l.Ac(l.Zb(32,23,t.unitPrice)),l.xb(3),l.Ac(l.Zb(35,25,t.quantity*t.unitPrice))}}function Q(t,e){if(1&t&&(l.Ob(0,"tr"),l.Jb(1,"td",122),l.Ob(2,"td",123),l.zc(3,"Grand Total"),l.Nb(),l.Ob(4,"td",123),l.zc(5),l.Yb(6,"currency"),l.Nb(),l.Nb()),2&t){const t=l.Xb();l.xb(5),l.Bc(" ",l.Zb(6,1,t.grandTotal)," ")}}function K(t,e){if(1&t){const t=l.Pb();l.Ob(0,"button",127),l.Vb("click",(function(){return l.uc(t),l.Xb(2).sendCartItemsToBusinessCentral()})),l.zc(1," Push In Business Central "),l.Nb()}if(2&t){const t=l.Xb(2);l.ec("disabled",""!=t.manufacturingCompany)}}function tt(t,e){if(1&t){const t=l.Pb();l.Ob(0,"button",128),l.Vb("click",(function(){return l.uc(t),l.Xb(2).removeItem()})),l.zc(1," Delete "),l.Nb()}if(2&t){const t=l.Xb(2);l.ec("disabled",t.deleteItem)}}function et(t,e){if(1&t){const t=l.Pb();l.Ob(0,"button",129),l.Vb("click",(function(){return l.uc(t),l.Xb(2).finishEdit()})),l.zc(1," Finish Editing "),l.Nb()}if(2&t){const t=l.Xb(2);l.ec("disabled",t.finishEditing)}}function it(t,e){if(1&t&&(l.Ob(0,"div",25),l.yc(1,K,2,1,"button",124),l.yc(2,tt,2,1,"button",125),l.yc(3,et,2,1,"button",126),l.Nb()),2&t){const t=l.Xb();l.xb(1),l.ec("ngIf",t.isDealer&&t.isBusinessCentral),l.xb(1),l.ec("ngIf",!t.isDealer),l.xb(1),l.ec("ngIf",!t.isDealer)}}function nt(t,e){1&t&&l.Jb(0,"div",130)}function ot(t,e){if(1&t&&(l.Ob(0,"div",142),l.zc(1),l.Nb()),2&t){const t=l.Xb(2);l.xb(1),l.Bc(" ",t.specialOrderValidationMessage," ")}}function at(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",131),l.Ob(1,"div",132),l.Ob(2,"h1",133),l.zc(3,"Add product information"),l.Nb(),l.Ob(4,"div",134),l.Ob(5,"span",135),l.zc(6,"Product Code:"),l.Nb(),l.Ob(7,"input",136),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb().specialOrderProductCode=e})),l.Nb(),l.Nb(),l.Ob(8,"div",134),l.Ob(9,"span",135),l.zc(10,"Product Price:"),l.Nb(),l.Ob(11,"input",136),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb().specialOrderUnitPrice=e})),l.Nb(),l.Nb(),l.Ob(12,"div",134),l.Ob(13,"span",135),l.zc(14,"Order Code:"),l.Nb(),l.Ob(15,"input",136),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb().specialOrderCode=e})),l.Nb(),l.Nb(),l.Ob(16,"div",134),l.Ob(17,"span",135),l.zc(18,"Product description:"),l.Nb(),l.Ob(19,"textarea",137),l.Vb("ngModelChange",(function(e){return l.uc(t),l.Xb().specialOrderDescription=e})),l.Nb(),l.Nb(),l.yc(20,ot,2,1,"div",138),l.Ob(21,"div",139),l.Ob(22,"button",140),l.Vb("click",(function(){return l.uc(t),l.Xb().saveProductInformationDialog()})),l.zc(23,"Save"),l.Nb(),l.Ob(24,"button",141),l.Vb("click",(function(){return l.uc(t),l.Xb().cancelProductInformationDialog()})),l.zc(25,"Cancel"),l.Nb(),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.Xb();l.xb(7),l.ec("ngModel",t.specialOrderProductCode),l.xb(4),l.ec("ngModel",t.specialOrderUnitPrice),l.xb(4),l.ec("ngModel",t.specialOrderCode),l.xb(4),l.ec("ngModel",t.specialOrderDescription),l.xb(1),l.ec("ngIf",""!=t.specialOrderValidationMessage)}}const ct=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,a){this.router=t,this.fb=e,this.cartService=i,this.projectService=n,this.catalogService=o,this.businessCentralService=a,this.baseUrl=c.a.baseUrl,this.cart=[],this.selectedIndex=[],this.tagNameArray=this.fb.array([]),this.qtyArray=this.fb.array([]),this.editCtrl=this.fb.array([]),this.dealerName="Furniture Dealer",this.projectName="No Project Selected",this.projectID="",this.finishEditing=!0,this.deleteItem=!0,this.userID=0,this.isDealer=!0,this.isBusinessCentral=!0,this.newProjectName="",this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project",this.needToEnableSpecialOrderLink=!1,this.showProductInformationDialog=!1,this.specialOrderValidationMessage="",this.specialOrderProductCode="",this.specialOrderUnitPrice="",this.specialOrderDescription="",this.specialOrderCode="",this.manufacturingCompany="",this.sticky=!1,this.showNav=!0,this.companyCode="",this.catalogControl=new r.d(""),this.companyControl=new r.d(""),this.cart_nodes=[],this.qty=new r.d("1"),this.codeChk=!1,this.singleProductData={id:null,item:null,group:[],price:null,description:null,finishImages:[],finishOptions:[],finishCode:[],finishPrice:[],finishName:[],qty:1},this.options={allowDrag:t=>!t.hasChildren},this.companies=[],this.companyCatalogues=[],this.cImgs=[],this.logo=""}logout(){"user"in localStorage&&(localStorage.removeItem("user"),this.router.navigateByUrl("/login"))}checkBox(t){if(null==this.selectedIndex.find(e=>e==t))this.selectedIndex.push(t),this.deleteItem=!1;else{let e=this.selectedIndex.findIndex(e=>e==t);this.selectedIndex.splice(e,1),0==this.selectedIndex.length&&(this.deleteItem=!0)}this.needToEnableSpecialOrderLink=this.selectedIndex&&1===this.selectedIndex.length}removeItem(){let t=this.cart.filter(t=>this.selectedIndex.map(t=>t.id).indexOf(t.id)>-1);t&&t.length>0&&this.cartService.deleteCartItems(t.map(t=>t.id)).subscribe(t=>{console.log("delete status: "+t),this.cart=this.cart.filter(t=>this.selectedIndex.map(t=>t.id).indexOf(t.id)<0),this.loadCartDetailsWithouAPICall()},t=>{console.log("Something went wrong while delete the cart items. Error details: "+JSON.stringify(t))})}editFinish(t,e){if(this.cart[t].isSpecialProduct)return alert("This is a special order product. You cannot edit the finish of such product. Please remove this item from cart and add again to proceed with updating the finish."),void e.preventDefault();let i=this.cart.findIndex(t=>1==t.edit);-1!=i&&(this.cart[i].edit=!1),this.cart[t].edit=!0,this.finishEditing=!1}changeOrderCode(t,e,i,n,o){this.cart[t].finishCode[e]=i,this.cart[t].fullSpecificationCode=this.cart[t].productID+i,this.cart[t].finishName[e]=o,null!=n&&null==this.cart[t].finishPrice[e]&&(this.cart[t].finishPrice[e]=parseFloat(n),this.cart[t].unitPrice=+this.cart[t].unitPrice+ +this.cart[t].finishPrice[e],this.cart[t].unitPrice=parseFloat(this.cart[t].unitPrice).toFixed(2)),null==this.cart[t].finishCode.find(t=>" ??"==t)&&(this.cart[t].backgroundColor="true"),this.updateAndReloadCartDetails(t),this.editFinish(t,null)}changeTagName(t){this.cart[t].tagName=this.tagNameArray.controls[t].value,this.updateAndReloadCartDetails(t)}stepDown(t){1!=this.qtyArray.controls[t].value&&(this.qtyArray.controls[t].setValue(this.qtyArray.controls[t].value-1),this.changePrice(t))}stepUp(t){this.qtyArray.controls[t].setValue(this.qtyArray.controls[t].value+1),this.changePrice(t)}changePrice(t){this.cart[t].quantity=this.qtyArray.controls[t].value,this.updateAndReloadCartDetails(t)}updateAndReloadCartDetails(t){let e={quantity:this.cart[t].quantity,tagName:this.cart[t].tagName,finishCode:JSON.stringify(this.cart[t].finishCode),finishName:JSON.stringify(this.cart[t].finishName),finishPrice:JSON.stringify(this.cart[t].finishPrice),productID:this.cart[t].productID,fullSpecificationCode:this.cart[t].fullSpecificationCode,backgroundColor:this.cart[t].backgroundColor,unitPrice:this.cart[t].unitPrice,displayName:this.cart[t].displayName,isSpecialProduct:this.cart[t].isSpecialProduct};this.cartService.updateCartItem(e,parseInt(this.cart[t].id)).subscribe(t=>{console.log("cart item update status: "+t)},t=>{console.log("Something went wrong while updating the cart. Error details: "+JSON.stringify(t))}),this.loadCartDetailsWithouAPICall()}finishEdit(){let t=0;this.editCtrl.controls.forEach(e=>{e.setValue(!1),this.cart[t]&&(this.cart[t].edit=!1,t++)})}ngOnInit(){this.getManufacturingCompanies(),this.setDealerAndProjectName(),this.loadCartDetails()}onHide(){console.log("hello"),this.showNav=1!=this.showNav}changeCategory(t){this.router.navigateByUrl(`/catalog/category/${this.companyCode}/${this.code}/${t}`),this.catalogService.sendcatalogCategory(t)}changeSubCategory(t,e){this.router.navigateByUrl(`/catalog/sub-category/${this.companyCode}/${this.code}/${t}/${e}`),this.catalogService.sendcatalogSubCategory({id:t,sub_id:e})}changeProduct(t,e,i){this.router.navigateByUrl(`/catalog/product/${this.companyCode}/${this.code}/${t}/${e}/${i}`),this.catalogService.sendcatalogProduct({id:t,sub_id:e,product_id:i}),this.selectedItem=i}getCatalogue(){console.log("uhjh"),this.code=this.catalogControl.value,this.companyCode=this.companyControl.value,this.catalogService.getManufacturingCatalogue(this.companyCode,this.code).subscribe(t=>{this.catalogue=t.CATALOG,this.cart_nodes=[];for(let e=0;e<this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL.length;e++){const t={id:this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].id,name:this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].DESCRIPTIONS.TEXT.Text,children:[]};for(let i=0;i<this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].LEVEL.LABEL.length;i++){const n={id:this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].LEVEL.LABEL[i].id,name:this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].LEVEL.LABEL[i].DESCRIPTIONS.TEXT.Text,children:[]};for(let t=0;t<this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].LEVEL.LABEL[i].TOC_ITEMS.TOC_ITEM.length;t++)n.children.push({id:this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].LEVEL.LABEL[i].TOC_ITEMS.TOC_ITEM[t].id,name:this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL[e].LEVEL.LABEL[i].TOC_ITEMS.TOC_ITEM[t].id});t.children.push(n)}this.cart_nodes.push(t)}console.log(this.cart_nodes)})}onEvent(t){let e=this.carttree.treeModel.getNodeById(t.node.data.id);if("number"==typeof e.parent.data.id){let t=e.parent.data.children;for(let e=0;e<t.length;e++)this.carttree.treeModel.getNodeById(t[e].id).collapseAll()}else if(null!=e.data.children){let t=e.parent.data.children;for(let e=0;e<t.length;e++)this.carttree.treeModel.getNodeById(t[e].id).collapseAll()}else this.carttree.treeModel.getNodeById(e.parent.data.id);e.expand()}onDrop(t){console.log(t),this.changeproduct(t.element.parent.parent.data.id,t.element.parent.data.id,t.element.data.id)}changeproduct(t,e,i){if(this.qty.setValue("1"),this.codeChk=!1,this.selectedSingleProductId=i,this.productId=i,this.productCatalog=this.catalogue.TABLE_OF_CONTENTS.LEVEL.LABEL.LEVEL.LABEL.find(e=>e.id==t),this.subProductCatalog=this.productCatalog.LEVEL.LABEL.find(t=>t.id==e),this.singleProductData.group=[],this.singleProductData.finishImages=[],this.singleProductData.finishCode=[],this.singleProductData.finishPrice=[],this.singleProductData.finishName=[],this.singleProductData.finishOptions=[],this.singleProductData.id=i,this.singleProductData.item=this.catalogue.ITEMS.ITEM.find(t=>t.id==this.singleProductData.id),this.singleProductData.qty=1,this.singleProductData.item.ITEM_GROUPS.ITEM_GROUP instanceof Array){var n=0;this.singleProductData.item.ITEM_GROUPS.ITEM_GROUP.forEach(t=>{var e=this.catalogue.GROUPS.GROUP.find(e=>e.id==t.id);this.singleProductData.group.push(e),this.singleProductData.finishCode.push(" ??"),e.OPTIONS.OPTION instanceof Array?this.singleProductData.finishOptions[n]=e.OPTIONS.OPTION:(this.singleProductData.finishOptions[n]=[],this.singleProductData.finishOptions[n].push(e.OPTIONS.OPTION)),n+=1})}else{let t=this.singleProductData.item.ITEM_GROUPS.ITEM_GROUP.id;var o=this.catalogue.GROUPS.GROUP.find(e=>e.id==t);this.singleProductData.group.push(o),this.singleProductData.finishCode.push(" ??"),o.OPTIONS.OPTION instanceof Array?this.singleProductData.finishOptions[0]=o.OPTIONS.OPTION:(this.singleProductData.finishOptions[0]=[],this.singleProductData.finishOptions[0].push(o.OPTIONS.OPTION))}this.singleProductData.price=parseFloat(this.singleProductData.item.PRICES.PRICE.Text),this.catalogService.getSectionTextFile(this.productCatalog.id,this.subProductCatalog.id,this.code,this.companyCode).subscribe(t=>{this.singleProductData.description=t,this.addToCart()}),this.price=this.singleProductData.price.toFixed(2)}addToCart(){var t=null;let e;e=(t=(t=this.singleProductData.finishCode.toString()).replace(/,/g,"")).includes("?")?"":"#cbebc6",console.log(this.singleProductData);const i=JSON.parse(localStorage.getItem("user")),n={productID:this.singleProductData.id,productImage:this.singleProductData.id.toLowerCase()+"_3d.png",description:this.singleProductData.description,backgroundColor:e,companyCode:this.companyCode,displayName:this.singleProductData.item.LONG_DESC.TEXT.Text,baseUnitofMeasure:"PCS",unitPrice:parseFloat(this.singleProductData.price.toFixed(2)),quantity:parseInt(this.qty.value),genProdPostingGroup:"RETAIL",inventoryPostingGroup:"RESALE",manufacturingCompany:this.catalogue.desc,manufacturingCompanyThreeLettersCode:this.catalogue.code,catalogName:this.code,catalogThreeLettersCode:this.code,catalogReleaseDate:`${this.catalogue.year}-${this.catalogue.month}-${this.catalogue.day}`,fullSpecificationCode:this.singleProductData.id+t,tagName:"",finishOptions:JSON.stringify(this.singleProductData.finishOptions),productGroup:JSON.stringify(this.singleProductData.group),finishCode:JSON.stringify(this.singleProductData.finishCode),finishName:JSON.stringify(this.singleProductData.finishName),finishPrice:JSON.stringify(this.singleProductData.finishPrice),edit:!1,users_id:i.id,projects_id:i.projectID};console.log(n),this.cartService.create(n).subscribe(t=>{t.data>0?(this.catalogService.sendProductCatalog(),this.loadCartDetails()):alert(t.message)},t=>{console.log("Something went wrong while creating cart item. Error details : "+JSON.stringify(t))})}sideNav(t){if(0==t){this.carttree.treeModel.collapseAll();let t=this.carttree.treeModel.getActiveNode();t&&t.setIsActive(!1)}else{let e=this.carttree.treeModel.getNodeById(t),i=e.parent.data.children;for(let t=0;t<i.length;t++)this.carttree.treeModel.getNodeById(i[t].id).collapseAll();e.expand(),e.setIsActive(!0)}}getManufacturingCompanies(){this.catalogService.getManufacturingCompanies().subscribe(t=>{console.log(t),t?(this.companies=t,this.companyControl.setValue(this.companies[0].CompanyName),this.companyUrl=this.companies[0].CompanyUrlName,this.getCompanyCatalogues()):alert("No companies found ! Please check the mapping and try again.")},t=>{console.log("Error getting manufacturing comapanies: "+JSON.stringify(t))})}getCompanyCatalogues(){this.companyCode=this.companyControl.value,this.catalogService.getCompanyCatalogues(this.companyCode).subscribe(t=>{console.log(t),this.companyCatalogues=[],this.catalogControl.setValue("");for(let e=0;e<t.catalogs.length;e++)"company_images"!=t.catalogs[e].name&&"logo"!=t.catalogs[e].name&&this.companyCatalogues.push(t.catalogs[e]);this.cImgs=t.company_images,this.logo=t.company_logo[0].name})}onCompanyChange(){let t=this.companies.find(t=>t.CompanyName==this.companyControl.value);console.log(t),this.companyUrl=t.CompanyUrlName,this.getCompanyCatalogues(),this.catalogue=null}setDealerAndProjectName(){if("user"in localStorage){this.loggedInUser=JSON.parse(localStorage.getItem("user"));let t=this.loggedInUser.DealerName;t&&""!=t&&(this.dealerName=t);let e=this.loggedInUser.projectID;e&&e>0&&(this.projectID=e.toString());let i=this.loggedInUser.projectName;i&&""!=i&&(this.projectName=i)}}loadCartDetails(){this.loggedInUser.dealers_id>0?(this.userID=this.loggedInUser.id,this.isDealer=!1,this.loggedInUser.BCProjectNumber||(this.isBusinessCentral=!1)):this.projects||(this.loadManufacturingCompanies(),this.loadProjects()),this.loadCartDetailsWithApiCall()}loadCartDetailsWithApiCall(){this.cartService.getCartItemsByUserIDProjectIDAndManufacturingCompany(this.userID,this.loggedInUser.projectID,this.manufacturingCompany).subscribe(t=>{this.cart=t.data;let e=0;this.cart.length>0&&this.cart.forEach(t=>{t.finishOptions=JSON.parse(t.finishOptions),t.productGroup=JSON.parse(t.productGroup),t.finishCode=JSON.parse(t.finishCode),t.finishName=JSON.parse(t.finishName),t.finishPrice=JSON.parse(t.finishPrice),t.edit=!1,e+=+t.quantity*t.unitPrice,this.tagNameArray.push(new r.d(t.tagName)),this.qtyArray.push(new r.d(t.quantity)),this.editCtrl.push(new r.d(!1))}),this.grandTotal=parseFloat(e.toString()).toFixed(2)},t=>{console.log(`Something went wrong while getting cart items for user ${this.userID}. Error details : ${JSON.stringify(t)}`)})}loadProjects(){this.projectService.getProjectsByDealerID(this.loggedInUser.id).subscribe(t=>{this.projects=t,this.projects.filter(t=>t.id==parseInt(this.projectID)).length<=0&&(this.projectID="0")},t=>{console.log("Failed to get projects by dealer id. Error details: "+JSON.stringify(t))})}loadCartDetailsWithouAPICall(){let t=0;this.cart.length>0&&this.cart.forEach(e=>{e.edit=!1,t+=+e.quantity*e.unitPrice,this.tagNameArray.push(new r.d(e.tagName)),this.qtyArray.push(new r.d(e.quantity)),this.editCtrl.push(new r.d(!1))}),this.grandTotal=parseFloat(t.toString()).toFixed(2)}sendCartItemsToBusinessCentral(){"user"in localStorage?this.cart&&this.cart.length>0?""!=JSON.parse(localStorage.getItem("user")).BCProjectNumber?this.checkIfItemExistsInBusinessCentral():alert("Project not created in Business Central ! Please try again after creating project in Business Central."):alert("No items in cart to push"):alert("Oops ! It seems that you have not logged in. Please login with same user as in business central to push items in business central.")}checkIfItemExistsInBusinessCentral(t=1){if(this.cart&&t<=this.cart.length){let e=this.cart[t-1];if(e.businessCentralItemNumber&&""!=e.businessCentralItemNumber)this.checkIfItemExistsInBusinessCentral(++t);else{let i=this.cart.filter(t=>t.fullSpecificationCode==e.fullSpecificationCode)[0];i&&i.businessCentralItemNumber&&""!=i.businessCentralItemNumber?(this.cart[t-1].businessCentralItemNumber=i.businessCentralItemNumber,this.checkIfItemExistsInBusinessCentral(++t)):this.checkInBusinessCentral(t)}}else this.createBisemaSalesLine(JSON.parse(localStorage.getItem("user")).BCProjectNumber)}checkInBusinessCentral(t){this.businessCentralService.getDetailsFromDynamics("BiSemAItem",`?$filter=fullSpecificationCode eq '${this.cart[t-1].fullSpecificationCode}'`).subscribe(e=>{e&&e.value&&e.value.length>0?(this.cart[t-1].businessCentralItemNumber=e.value[0].number,this.checkIfItemExistsInBusinessCentral(++t)):this.createBiSemAItem(t)},e=>{console.log("error occured while calling dynamics BiSemA Item exists check call : "+JSON.stringify(e)),this.checkIfItemExistsInBusinessCentral(++t)})}createBiSemAItem(t){let e=t-1,i={displayName:this.cart[e].displayName,baseUnitofMeasure:this.cart[e].baseUnitofMeasure,unitPrice:this.cart[e].unitPrice,userName:this.cart[e].users_id.toString(),genProdPostingGroup:this.cart[e].genProdPostingGroup,inventoryPostingGroup:this.cart[e].inventoryPostingGroup,manufacturingCompany:this.cart[e].manufacturingCompany,manufacturingCompanyThreeLettersCode:this.cart[e].manufacturingCompanyThreeLettersCode,catalogName:this.cart[e].catalogName,catalogThreeLettersCode:this.cart[e].catalogThreeLettersCode,catalogReleaseDate:this.cart[e].catalogReleaseDate,fullSpecificationCode:this.cart[e].fullSpecificationCode,tagName:this.cart[e].tagName};this.getBase64FromImageURL(`${this.baseUrl}assets/${this.cart[e].companyCode}/${this.cart[e].catalogName}/prod_icons/${this.cart[e].productImage}`,n=>{""!=n&&(i.picture=n.split("base64,")[1]),this.businessCentralService.postDetailsInDynamics(i,"BiSemAItem").subscribe(i=>{i?this.cart[e].businessCentralItemNumber=i.number:console.log("BiSemA Item not created"),this.checkIfItemExistsInBusinessCentral(++t)},e=>{console.log("error occured while calling dynamics BiSemA Item call : "+JSON.stringify(e)),this.checkIfItemExistsInBusinessCentral(++t)})})}createBisemaSalesLine(t,e=1){if(this.cart&&e<=this.cart.length){let i=e-1,n={documentType:"Order",documentNumber:t,lineNumber:1e4*e,type:"Item",number:this.cart[i].businessCentralItemNumber,description:this.cart[i].displayName,unitofMeasure:this.cart[i].baseUnitofMeasure,quantity:parseInt(this.cart[i].quantity),unitCostLcy:this.cart[i].unitPrice,directUnitCost:this.cart[i].unitPrice,lineAmount:this.cart[i].unitPrice*parseInt(this.cart[i].quantity),userName:this.cart[i].users_id.toString(),manufacturingCompany:this.cart[i].manufacturingCompany,manufacturingCompanyThreeLettersCode:this.cart[i].manufacturingCompanyThreeLettersCode,catalogName:this.cart[i].catalogName,catalogThreeLettersCode:this.cart[i].catalogThreeLettersCode,catalogReleaseDate:this.cart[i].catalogReleaseDate,fullSpecificationCode:this.cart[i].fullSpecificationCode,tagName:this.cart[i].tagName};this.businessCentralService.postDetailsInDynamics(n,"BiSemASalesLine").subscribe(n=>{n?e===this.cart.length?this.projectService.updateProject({isClosed:1,orderConfirmationDate:new Date},JSON.parse(localStorage.getItem("user")).projectID).subscribe(t=>{alert("Details pushed to Dynamics Business Central !! This project has been closed now. Please refresh your project selection."),this.loadCartDetailsWithApiCall(),this.projectID="0",this.loadProjects(),this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project",console.log("project update status: "+t)},t=>{console.log("Something went wrong while updating project details. Error details: "+JSON.stringify(t))}):this.createBisemaSalesLine(t,++e):console.log("error occured while calling dynamics BiSemA Sales Line call for "+this.cart[i].businessCentralItemNumber)},t=>{console.log("error occured while calling dynamics BiSemA Sales Line call : "+JSON.stringify(t))})}}getBase64FromImageURL(t,e){const i=new XMLHttpRequest;i.onload=()=>{if(200===i.status){const t=new FileReader;t.onloadend=()=>{e(t.result)},t.readAsDataURL(i.response)}else console.log("image not found at "+t),e("")},i.open("GET",t),i.responseType="blob",i.send()}projectSelectionChange(){const t=parseInt(this.projectID,10);this.loggedInUser.projectID!=t&&(this.loggedInUser.projectID=t,this.loggedInUser.projectName=this.projects.filter(e=>e.id===t)[0].projectName,localStorage.setItem("user",JSON.stringify(this.loggedInUser)),this.manufacturingCompany="",this.setDealerAndProjectName(),this.loadCartDetailsWithApiCall())}cloneProject(){this.isNeedToShowNewProjectName?""!=this.newProjectName&&this.projectService.checkIfExistsWithName(this.loggedInUser.id,this.newProjectName).subscribe(t=>{0==t.data?this.createBiSemASalesHeader():alert(t.message)},t=>{console.log("Error occured while checking if project exists same name or not. Error details: "+JSON.stringify(t))}):(this.newProjectName=this.projectName+" - cloned",this.isNeedToShowNewProjectName=!0,this.cloneProjectButtonText="Create project")}createBiSemASalesHeader(){let t={projectName:this.newProjectName,cloneFrom:this.loggedInUser.BCProjectNumber,isBiSemARecord:!0,documentType:"Order",selltocustomerNumber:"10000",orderDate:`${(new Date).getFullYear()}-${("0"+((new Date).getMonth()+1)).slice(-2)}-${("0"+(new Date).getDate()).slice(-2)}`};this.businessCentralService.postDetailsInDynamics(t,"BiSemASalesHeader",this.loggedInUser).subscribe(t=>{t?this.projectService.cloneProject({projectName:this.newProjectName,cloneFromProjectNumber:this.loggedInUser.BCProjectNumber,projectNumber:t.number}).subscribe(t=>{t.data>0?(this.projectID="0",this.loadProjects(),this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project",alert("Project has been cloned successfully. It will get populated in selection list."),setTimeout(()=>{this.setDealerAndProjectName()},200)):alert(t.message)},t=>{console.log("Error occured while creating project. Error details: "+JSON.stringify(t))}):console.log("BiSemA Sales Header not created")},t=>{console.log("error occured while calling dynamics BiSemA Sales Header call : "+JSON.stringify(t))})}cancelProjectCreate(){this.isNeedToShowNewProjectName=!1,this.cloneProjectButtonText="Clone this project"}showSpecialOrderForm(){let t=this.cart.filter(t=>t.id===this.selectedIndex[0].id);t&&t.length>0?(this.specialOrderProductCode=t[0].productID,this.specialOrderUnitPrice=t[0].unitPrice,this.specialOrderCode=t[0].fullSpecificationCode.replace(t[0].productID,""),this.specialOrderDescription=t[0].displayName,this.specialOrderValidationMessage=""):(this.specialOrderProductCode="",this.specialOrderUnitPrice="",this.specialOrderDescription="",this.specialOrderValidationMessage=""),this.showProductInformationDialog=!0}cancelProductInformationDialog(){this.showProductInformationDialog=!1,this.needToEnableSpecialOrderLink=!1,this.selectedIndex=[],this.checkboxes.forEach(t=>{t.nativeElement.checked=!1}),this.deleteItem=!0}saveProductInformationDialog(){if(this.selectedIndex&&this.selectedIndex.length>0)if(""!=this.specialOrderProductCode)if(""!=this.specialOrderUnitPrice)if(""!=this.specialOrderDescription){let t=this.cart.findIndex(t=>t.id===this.selectedIndex[0].id);t>-1?(this.cart[t].isSpecialProduct=!0,this.cart[t].productID=this.specialOrderProductCode,this.cart[t].fullSpecificationCode=this.specialOrderProductCode+this.specialOrderCode,this.cart[t].unitPrice=parseFloat(this.specialOrderUnitPrice).toFixed(2),this.cart[t].displayName=this.specialOrderDescription,this.cart[t].backgroundColor=this.cart[t].fullSpecificationCode.indexOf("?")<0?"true":"",this.updateAndReloadCartDetails(t),this.needToEnableSpecialOrderLink=!1,this.showProductInformationDialog=!1,this.selectedIndex=[],this.checkboxes.forEach(t=>{t.nativeElement.checked=!1}),this.deleteItem=!0):alert("It seems that the item you selected for special order not found. Please try again.")}else this.specialOrderValidationMessage="Please enter product description";else this.specialOrderValidationMessage="Please enter product price";else this.specialOrderValidationMessage="Please enter product code"}loadManufacturingCompanies(){this.catalogService.getManufacturingCompanies().subscribe(t=>{t&&(this.manufacturingCompanies=t)},t=>{console.log("Error getting manufacturing comapanies: "+JSON.stringify(t))})}manufacturingCompanySelectionChange(){this.loadCartDetailsWithApiCall()}handleScroll(){if(this.menuElement){const t=window.pageYOffset;this.sticky=t>=this.menuPosition}}ngAfterViewInit(){this.menuElement&&(this.menuPosition=this.menuElement.nativeElement.offsetTop)}}return t.\u0275fac=function(e){return new(e||t)(l.Ib(a.b),l.Ib(r.c),l.Ib(d.a),l.Ib(b.a),l.Ib(h.a),l.Ib(u.a))},t.\u0275cmp=l.Cb({type:t,selectors:[["app-cart"]],viewQuery:function(t,e){var i;1&t&&(l.Ec(p,!0),l.Ec(s.a,!0),l.Ec(f,!0)),2&t&&(l.qc(i=l.Wb())&&(e.menuElement=i.first),l.qc(i=l.Wb())&&(e.carttree=i.first),l.qc(i=l.Wb())&&(e.checkboxes=i))},hostBindings:function(t,e){1&t&&l.Vb("scroll",(function(t){return e.handleScroll(t)}),!1,l.tc)},decls:74,vars:14,consts:[[1,"navbar","navbar-dark","bg-purple","navbar-expand-sm"],["href","http://www.bisema.com","target","_blank",1,"navbar-brand"],["src","../../assets/img/bisema_logo.jpg","alt","logo","height","40"],[1,"dropdown","ml-auto","dropleft"],["href","#","id","navbarDropdownMenuLink","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","text-white"],[1,"fa","fa-user-circle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],["href","#",1,"dropdown-item"],["href","javascript:;",1,"dropdown-item",3,"click"],["class","row top-row",4,"ngIf"],["activeTabName","cart",3,"cartCount",4,"ngIf"],["class","row",4,"ngIf"],[1,"mt-0"],[1,"row"],["class","col-2",3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"table","table-bordered",3,"treeDrop"],[1,"thead-light"],[1,"text-center"],["scope","col",4,"ngIf"],[4,"ngIf"],["scope","col",1,"bordNone"],["scope","col"],["class","text-center data",3,"ngClass",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"row","bg-purple","pt-3"],[1,"col-12","blackfter"],[1,"d-flex","justify-content-center"],[1,"list-inline","list-unstyled","m-0"],[1,"list-inline-item"],["href","https://www.facebook.com","target","https://www.facebook.com/bisemacorp"],[1,"fa","fa-facebook","fa-2x","mr-2"],["href","https://www.linkedin.com ","target","https://www.linkedin.com/bisema-corporation "],[1,"fa","fa-linkedin","fa-2x","mr-2"],["href","https://www.twitter.com ","target","https://www.twitter.com/bisemacorp "],[1,"fa","fa-twitter-square","fa-2x"],[1,"text-center","mt-3"],[1,"text-white"],["class","dialog_overlay",4,"ngIf"],["class","card dialog",4,"ngIf"],[1,"row","top-row"],[1,"col-md-4","mt-2","ml-0","mr-0"],[1,"fa","fa-cogs"],[1,"text-muted"],[1,"col-md-4","text-center","mt-2","ml-0","mr-0"],[1,"fa","fa-users"],[1,"pt-2",2,"float","left"],[1,"ml-2",2,"float","left"],["id","projects",1,"form-control",3,"ngModel","ngModelChange","change"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["style","clear: both;","class","pt-2",4,"ngIf"],["style","float: left;",4,"ngIf"],["class","ml-2","style","float: left",4,"ngIf"],[1,"col-md-4","text-center","mt-2","pt-2","ml-0","mr-0"],[1,"ml-2",2,"float","right"],["id","manufacturingCompanies",1,"form-control",3,"ngModel","ngModelChange","change"],["value",""],[1,"pt-2",2,"float","right"],[3,"value"],[1,"pt-2",2,"clear","both"],[2,"float","left"],["type","text","name","newProjectName","id","newProjectName","placeholder","Enter new project name",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-cogs","btn","btn-dark","btn-sm","btn2","p-2",3,"click"],["activeTabName","cart",3,"cartCount"],[1,"col-md-4","ml-0","mt-2"],["type","button","role","button",1,"btn","btn2","btn-lg","float-left",3,"click"],[1,"fa","fa-bars",2,"font-size","25px"],[1,"col-md-4","ml-0","mt-2","pt-2","text-center"],[1,"col-md-4","ml-0","mt-2","pt-2","text-right"],[2,"cursor","pointer","color","rgb(6, 10, 243)",3,"ngClass","click"],[1,"col-md-12","ml-0","mt-2","pt-2","text-center"],[1,"col-2",3,"ngClass"],["stickyMenu",""],[1,"card-header","d-flex","justify-content-between","bg-sidenav","align-items-center"],[1,"font-weight-bold"],["target","_blank",3,"href",4,"ngIf"],["id","sel1",1,"form-control","w-50","ml-1",3,"formControl","change"],[1,"card-body","bg-sidenav",3,"ngClass"],["href","javascript:;",1,"clr-purple","font-weight-bold"],["id","selCatalogue",1,"form-control","w-100",3,"formControl","change"],["value","","selected","","disabled",""],["class","input-group my-3",4,"ngIf"],["class","clr-purple font-weight-bold","href","javascript:;",4,"ngIf"],[3,"options","nodes","activate",4,"ngIf"],["target","_blank",3,"href"],["alt","","srcset","",3,"src"],[1,"input-group","my-3"],["type","text","id","filter","placeholder","Search",1,"form-control",3,"keyup"],["filter",""],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"fa","fa-close"],[3,"options","nodes","activate"],["carttree",""],[1,"text-center","data",3,"ngClass"],["type","text","placeholder","Type tagname ...",1,"tag-name",3,"formControl","readonly","change"],[1,"img-hover-zoom"],["width","100","alt","Buy",3,"src"],["class","code text-left",4,"ngIf"],["class","text-left","id","c-collapse",4,"ngIf"],[1,"bordNone"],[1,"cart-info"],[1,"number-input"],["type","button",3,"click"],["min","1","name","quantity","value","1","type","number",1,"quantity","form-control","mkbld","p-0","mx-auto",3,"formControl","change"],["type","button",1,"plus",3,"click"],["type","checkbox",3,"click"],["cartCheckboxes",""],["type","radio","name","finish","id","",3,"formControl","value","click"],[1,"code","text-left"],[4,"ngFor","ngForOf"],["id","c-collapse",1,"text-left"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],["data-toggle","collapse",1,"text-dark",3,"href"],[1,"fa","fa-caret-right","text-dark"],["data-parent","#c-collapse",1,"collapse",3,"id"],["class","",4,"ngFor","ngForOf"],[1,""],["href","javascript:;",1,"side-child-item","p-1",3,"ngClass","click"],["colspan","10"],[1,"font-weight-bold","text-center"],["class","float-right btn btn2 mr-5 fa fa-address-book",3,"disabled","click",4,"ngIf"],["class","float-right btn btn3 ml-2 mr-5 fa fa-trash",3,"disabled","click",4,"ngIf"],["class","float-right btn btn2 mr-5 fa fa-edit",3,"disabled","click",4,"ngIf"],[1,"float-right","btn","btn2","mr-5","fa","fa-address-book",3,"disabled","click"],[1,"float-right","btn","btn3","ml-2","mr-5","fa","fa-trash",3,"disabled","click"],[1,"float-right","btn","btn2","mr-5","fa","fa-edit",3,"disabled","click"],[1,"dialog_overlay"],[1,"card","dialog"],[1,"card-body","bg-purple"],[1,"text-center","text-white","mb-3"],[1,"input-group","mb-3"],[1,"text-white","mt-2","mr-3",2,"width","20%"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["class","input-group mb-3 text-white text-center","style","display: block",4,"ngIf"],[1,"mb-3","text-center"],[1,"btn","btn-success","btn2","mr-3",3,"click"],[1,"btn","btn-success","btn2",3,"click"],[1,"input-group","mb-3","text-white","text-center",2,"display","block"]],template:function(t,e){1&t&&(l.Ob(0,"nav",0),l.Ob(1,"a",1),l.Jb(2,"img",2),l.Nb(),l.Ob(3,"div",3),l.Ob(4,"a",4),l.Jb(5,"i",5),l.Nb(),l.Ob(6,"div",6),l.Ob(7,"a",7),l.zc(8,"Dashboard"),l.Nb(),l.Ob(9,"a",7),l.zc(10,"Edit Profile"),l.Nb(),l.Ob(11,"a",8),l.Vb("click",(function(){return e.logout()})),l.zc(12,"Log Out"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.yc(13,m,13,2,"div",9),l.yc(14,I,33,9,"div",9),l.yc(15,v,1,1,"app-tabs",10),l.yc(16,w,11,1,"div",11),l.yc(17,S,3,0,"div",11),l.Jb(18,"hr",12),l.Ob(19,"div",13),l.yc(20,A,20,17,"div",14),l.Ob(21,"div",15),l.Ob(22,"table",16),l.Vb("treeDrop",(function(t){return e.onDrop(t)})),l.Ob(23,"thead",17),l.Ob(24,"tr",18),l.Ob(25,"th"),l.zc(26,"Item Number"),l.Nb(),l.Ob(27,"th"),l.zc(28,"Tagname"),l.Nb(),l.yc(29,B,2,0,"th",19),l.yc(30,z,2,0,"th",20),l.Ob(31,"th"),l.zc(32,"Product Image"),l.Nb(),l.Ob(33,"th"),l.zc(34,"Mfg"),l.Nb(),l.Ob(35,"th"),l.zc(36,"Cat"),l.Nb(),l.Ob(37,"th"),l.zc(38,"Order Code"),l.Nb(),l.Ob(39,"th",21),l.zc(40,"Product Descriptions"),l.Nb(),l.Ob(41,"th",22),l.zc(42,"Quantity"),l.Nb(),l.Ob(43,"th",22),l.zc(44,"Unit Price"),l.Nb(),l.Ob(45,"th",22),l.zc(46,"Total Price"),l.Nb(),l.Nb(),l.Nb(),l.Ob(47,"tbody"),l.yc(48,Z,36,29,"tr",23),l.yc(49,Q,7,3,"tr",20),l.Nb(),l.Nb(),l.Nb(),l.yc(50,it,4,3,"div",24),l.Ob(51,"div",25),l.Jb(52,"hr"),l.Nb(),l.Nb(),l.Ob(53,"div",26),l.Ob(54,"div",27),l.Ob(55,"div",28),l.Ob(56,"ul",29),l.Ob(57,"li",30),l.Ob(58,"a",31),l.Jb(59,"i",32),l.Nb(),l.Nb(),l.Ob(60,"li",30),l.Ob(61,"a",33),l.Jb(62,"i",34),l.Nb(),l.Nb(),l.Ob(63,"li",30),l.Ob(64,"a",35),l.Jb(65,"i",36),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(66,"div",37),l.Ob(67,"p",38),l.zc(68," Copyright "),l.Ob(69,"span"),l.zc(70,"\xa9"),l.Nb(),l.zc(71," 2021 BiSemA Corporation. "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.yc(72,nt,1,0,"div",39),l.yc(73,at,26,5,"div",40)),2&t&&(l.xb(13),l.ec("ngIf",!e.isDealer),l.xb(1),l.ec("ngIf",e.isDealer),l.xb(1),l.ec("ngIf",!e.isDealer),l.xb(1),l.ec("ngIf",!e.isDealer),l.xb(1),l.ec("ngIf",e.isDealer),l.xb(3),l.ec("ngIf",e.showNav&&!e.isDealer),l.xb(1),l.ec("ngClass",1!=e.showNav||e.isDealer?"col-12":1==e.sticky?"col-10 offset-2":"col-10"),l.xb(8),l.ec("ngIf",!e.isDealer),l.xb(1),l.ec("ngIf",!e.isDealer),l.xb(18),l.ec("ngForOf",e.cart),l.xb(1),l.ec("ngIf",e.cart.length>0),l.xb(1),l.ec("ngIf",e.cart.length>0),l.xb(22),l.ec("ngIf",e.showProductInformationDialog),l.xb(1),l.ec("ngIf",e.showProductInformationDialog))},directives:[o.m,o.k,s.b,o.l,r.p,r.i,r.k,r.l,r.r,r.b,g.a,r.e,s.a,r.m,r.n],pipes:[o.r,o.c],styles:['.navbar[_ngcontent-%COMP%]{margin:0;background-color:#53386f}.top-row[_ngcontent-%COMP%]{background-color:#f3f3f3}.nav-2[_ngcontent-%COMP%]{font-weight:700;height:50px}.nav-2[_ngcontent-%COMP%]   .fa-bookmark[_ngcontent-%COMP%]{color:grey}.nav-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{float:right;margin-right:10px;font-weight:500}.nav-2[_ngcontent-%COMP%]   .btn-1[_ngcontent-%COMP%]{background-color:#53386f}.profile[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:wheat;font-size:50px}.fa[_ngcontent-%COMP%]{color:#fff}.fa-cogs[_ngcontent-%COMP%], .fa-users[_ngcontent-%COMP%]{color:#000}.title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;margin-top:10px}.content[_ngcontent-%COMP%]{background-color:#f3f3f3;border-bottom:1px solid #bbb}.content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}.row[_ngcontent-%COMP%]{margin:0}.bar[_ngcontent-%COMP%]{margin-top:40px}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#53386f;color:#fff;border:none;margin-left:10px}.cart-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.cart-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:80px;margin-right:10px}.bordNone[_ngcontent-%COMP%]{border-right:none}.bordNone1[_ngcontent-%COMP%]{border-left:none}table[_ngcontent-%COMP%]{overflow-x:hidden}.code[_ngcontent-%COMP%]{color:#000;font-size:12px;font-weight:500}.data[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px}.buttons1[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{background-color:#53386f;color:#fff;margin-left:5px;margin-bottom:25px}.table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:600}.mkbld[_ngcontent-%COMP%]{text-align:center;font-weight:700}.tag-name[_ngcontent-%COMP%]{text-align:left;width:150px!important;height:30px;border:none;border-bottom:0 solid #a49aaf;border-radius:3px;background-color:#f8f2f2}.tag-name[_ngcontent-%COMP%]:focus{outline:none}.tag-name[_ngcontent-%COMP%]:focus::placeholder{font-size:10px}.btn2[_ngcontent-%COMP%]{color:#f5f5f5;background-color:#53386f}.btn2[_ngcontent-%COMP%]:hover{color:#000;background-color:#f5f5f5}.btn3[_ngcontent-%COMP%]{color:#f5f5f5;background-color:#d9534f}.btn3[_ngcontent-%COMP%]:hover{color:#000;background-color:#f5f5f5}@supports (-webkit-appearance:none) or (-moz-appearance:none){input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{--active:#53386f;--active-inner:#fff;--focus:2px rgba(39,94,254,0.3);--border:#bbc1e1;--border-hover:#275efe;--background:#fff;--disabled:#f6f8ff;--disabled-inner:#e1e6f9;-webkit-appearance:none;-moz-appearance:none;height:18px;outline:none;display:inline-block;vertical-align:top;position:relative;margin:0;cursor:pointer;border:.9px solid var(--bc,var(--border));background:var(--b,var(--background));transition:background .3s,border-color .3s,box-shadow .2s}input[type=checkbox][_ngcontent-%COMP%]:after, input[type=radio][_ngcontent-%COMP%]:after{content:"";display:block;left:0;top:0;position:absolute;transition:transform var(--d-t,.3s) var(--d-t-e,ease),opacity var(--d-o,.2s)}input[type=checkbox][_ngcontent-%COMP%]:checked, input[type=radio][_ngcontent-%COMP%]:checked{--b:var(--active);--bc:var(--active);--d-o:.3s;--d-t:.6s;--d-t-e:cubic-bezier(.2,.85,.32,1.2)}input[type=checkbox][_ngcontent-%COMP%]:disabled, input[type=radio][_ngcontent-%COMP%]:disabled{--b:var(--disabled);cursor:not-allowed;opacity:.9}input[type=checkbox][_ngcontent-%COMP%]:disabled:checked, input[type=radio][_ngcontent-%COMP%]:disabled:checked{--b:var(--disabled-inner);--bc:var(--border)}input[type=checkbox][_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{cursor:not-allowed}input[type=checkbox][_ngcontent-%COMP%]:hover:not(:checked):not(:disabled), input[type=radio][_ngcontent-%COMP%]:hover:not(:checked):not(:disabled){--bc:var(--border-hover)}input[type=checkbox][_ngcontent-%COMP%]:focus, input[type=radio][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 var(--focus)}input[type=checkbox][_ngcontent-%COMP%]:not(.switch), input[type=radio][_ngcontent-%COMP%]:not(.switch){width:18px}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):after, input[type=radio][_ngcontent-%COMP%]:not(.switch):after{opacity:var(--o,0)}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):checked, input[type=radio][_ngcontent-%COMP%]:not(.switch):checked{--o:1}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:14px;line-height:21px;display:inline-block;vertical-align:top;cursor:pointer;margin-left:4px}input[type=checkbox][_ngcontent-%COMP%]:not(.switch){border-radius:7px}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):after{width:5px;height:7px;border:2px solid var(--active-inner);border-top:0;border-left:0;left:5px;top:3px;transform:rotate(var(--r,20deg))}input[type=checkbox][_ngcontent-%COMP%]:not(.switch):checked{--r:43deg}input[type=radio][_ngcontent-%COMP%]{border-radius:50%}input[type=radio][_ngcontent-%COMP%]:after{width:16px;height:16px;border-radius:40%;bottom:200%;right:200%;background:var(--active-inner);opacity:0;transform:scale(var(--s,.5))}input[type=radio][_ngcontent-%COMP%]:checked{--s:.5}}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}.number-input[_ngcontent-%COMP%]{border:1px solid #aca4a4;border-radius:5px;display:inline-flex}.number-input[_ngcontent-%COMP%], .number-input[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;-webkit-appearance:none;background-color:initial;border:none;align-items:center;justify-content:center;width:2rem;height:2rem;cursor:pointer;margin:0;position:relative}.number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after, .number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{display:inline-block;position:absolute;top:50%;content:"";width:12px;height:1px;background-color:#212121;border-radius:5px;transform:translate(-50%,-50%)}.number-input[_ngcontent-%COMP%]   button.plus[_ngcontent-%COMP%]:after{transform:translate(-50%,-50%) rotate(90deg)}.number-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;border-radius:5px;box-shadow:1px 1px 1px 1px}.number-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-family:sans-serif;max-width:3rem;padding:.1rem;border:solid #ddd;border-width:0 2px;font-size:16px;height:2rem;font-weight:700;text-align:center}.link_disabled[_ngcontent-%COMP%], .link_disabled[_ngcontent-%COMP%]:hover{opacity:.5;cursor:not-allowed!important;color:#000!important}.dialog[_ngcontent-%COMP%]{top:50%;left:50%;width:50em;margin-top:-9em;margin-left:-25em;position:fixed;border:none!important;z-index:9999}.dialog_overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:.4;z-index:999}.fixedPosition[_ngcontent-%COMP%]{position:fixed;top:0;width:16%}.fixedMenuHeight[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}']}),t})()}];let rt=(()=>{class t{}return t.\u0275mod=l.Gb({type:t}),t.\u0275inj=l.Fb({factory:function(e){return new(e||t)},imports:[[a.d.forChild(ct)],a.d]}),t})(),st=(()=>{class t{}return t.\u0275mod=l.Gb({type:t}),t.\u0275inj=l.Fb({factory:function(e){return new(e||t)},imports:[[o.b,r.h,s.c,r.o,rt,n.a]]}),t})()}}]);